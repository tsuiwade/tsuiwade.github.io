<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>冲毕业结束 | TsuiWade's blog</title><meta name="keywords" content="科研"><meta name="author" content="tsuiwade"><meta name="copyright" content="tsuiwade"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="4.15完成大论文 随便记记吧 略累 有些不舍有些惭愧">
<meta property="og:type" content="article">
<meta property="og:title" content="冲毕业结束">
<meta property="og:url" content="https://tsuiwade.github.io/2023/04/24/blog71-studyover/index.html">
<meta property="og:site_name" content="TsuiWade&#39;s blog">
<meta property="og:description" content="4.15完成大论文 随便记记吧 略累 有些不舍有些惭愧">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230424195853639.png">
<meta property="article:published_time" content="2023-04-24T20:08:32.000Z">
<meta property="article:modified_time" content="2023-04-24T20:08:32.000Z">
<meta property="article:author" content="tsuiwade">
<meta property="article:tag" content="科研">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230424195853639.png"><link rel="shortcut icon" href="/img/me.png"><link rel="canonical" href="https://tsuiwade.github.io/2023/04/24/blog71-studyover/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-04-24 20:08:32'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/iconfont.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_2390943_bv078yuunhu.css"><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css"  media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="TsuiWade's blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/1a27de723e1cb04e5acd82cbf4146166_31ebbe760ba45b872b1b8f6c19eb6246.gif" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">70</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">41</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">23</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/charts/"><i class="fa-fw fas fa-chart-bar"></i><span> 统计</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230424195853639.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">TsuiWade's blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/charts/"><i class="fa-fw fas fa-chart-bar"></i><span> 统计</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">冲毕业结束</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-04-24T20:08:32.000Z" title="发表于 2023-04-24 20:08:32">2023-04-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-04-24T20:08:32.000Z" title="更新于 2023-04-24 20:08:32">2023-04-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%A7%91%E7%A0%94/">科研</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">13.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>73分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>还是非常感谢 <a target="_blank" rel="noopener" href="https://www.zhihu.com/question/373117145">https://www.zhihu.com/question/373117145</a></p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230106213047672.png" alt="image-20230106213047672"></p>
<hr>
<p>接下来需要考虑二维的问题了。</p>
<p>突然发现一个这个算法</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/18227014/selecting-evenly-distributed-points-algorithm">https://stackoverflow.com/questions/18227014/selecting-evenly-distributed-points-algorithm</a></p>
<p>算法是遍历前面的最小cost</p>
<p>double tempcost = solutions[j].cost + std::abs(dis[i] - dis[j] - 0.1);</p>
<p>0.1为1/10 但问题是凑不到10个点</p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230110193501924.png" alt="image-20230110193501924"></p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230110193718928.png" alt="image-20230110193718928"></p>
<p>在下面的回答中看到了</p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230110202736178.png" alt="image-20230110202736178"></p>
<p>提到了ANMS算法<em>自适应非</em>极大值<em>抑制算法</em></p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230110202840779.png" alt="image-20230110202840779"></p>
<p>有点像那么回事</p>
<hr>
<p>应该会有一些对比实验： 非极大值抑制算法ANMS、bucketing算法 <a target="_blank" rel="noopener" href="https://blog.csdn.net/frozenspring/article/details/117174032">https://blog.csdn.net/frozenspring/article/details/117174032</a> </p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u013453604/article/details/45350653">https://blog.csdn.net/u013453604/article/details/45350653</a>  ANMS</p>
<p>对比实验</p>
<p>EFFICIENTLY SELECTING SPATIALLY DISTRIBUTED KEYPOINTS FOR VISUAL TRACKING 2011</p>
<p>2005年 Matthew Brown在论文Multi-Image Matching using Multi-<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Scale&amp;spm=1001.2101.3001.7020">Scale</a> Oriented Patches提出了自适应非极大值抑制算法（Adaptive Non-Maximum Suppression，ANMS</p>
<p>最近有一篇论文讨论了图像上均匀关键点分布的问题。这个资源库提供了 C + + 、 Python 和 Matlab 接口</p>
<p>There is a recent <a target="_blank" rel="noopener" href="https://www.researchgate.net/publication/323388062_Efficient_adaptive_non-maximal_suppression_algorithms_for_homogeneous_spatial_keypoint_distribution">paper</a> that tackles the problem of homogeneous keypoint distribution on the image. C++, Python, and Matlab interfaces are provided in this <a target="_blank" rel="noopener" href="https://github.com/BAILOOL/ANMS-Codes">repository</a> </p>
<hr>
<p>L. F. Kozachenko and N. N. Leonenko. Sample estimate of entropy of a random vector. Problems of Information Transmission, 23:95–101, 1987.</p>
<p><a target="_blank" rel="noopener" href="https://kaba.hilvi.org/tim-1.3.0/tim/core/differential_entropy_kl_details.htm">https://kaba.hilvi.org/tim-1.3.0/tim/core/differential_entropy_kl_details.htm</a></p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230113120228341.png" alt="image-20230113120228341"></p>
<hr>
<p>学习b站kd树</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1d5411w7f5/?spm_id_from=333.337.search-card.all.click&amp;vd_source=6c92aa3e5d0f2e0347ec135013a906d8">https://www.bilibili.com/video/BV1d5411w7f5/?spm_id_from=333.337.search-card.all.click&amp;vd_source=6c92aa3e5d0f2e0347ec135013a906d8</a></p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230113203850687.png" alt="image-20230113203850687"></p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230113144914106.png" alt="image-20230113144914106"></p>
<p>后来在思考我的矩形是首尾相连的，该怎么办呢。</p>
<p>学习kd树的搜索原理，自己画了个图就能理解了，当点的最小半径 &lt; 该点的x，说明会和x=0相交，那么将该点的x轴加360，再进行搜索，最终比较两个半径，取最小的半径作为distance。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.special <span class="keyword">import</span> gamma, digamma</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> entropy_estimators <span class="keyword">import</span> continuous</span><br><span class="line">X = np.loadtxt(<span class="built_in">open</span>(<span class="string">&quot;J2000_5_hor2.csv&quot;</span>, <span class="string">&quot;rb&quot;</span>), delimiter=<span class="string">&quot;,&quot;</span>, skiprows=<span class="number">0</span>)</span><br><span class="line">print(X.shape)</span><br><span class="line">kozachenko = continuous.get_h(X, k=<span class="number">1</span>, norm=<span class="string">&#x27;euclidean&#x27;</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">f&quot;K-L estimator: <span class="subst">&#123;kozachenko:<span class="number">.5</span>f&#125;</span>&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>所有点的 K-L estimator: 11.33121（魔改distance前）</p>
<p>魔改效果为 </p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230113164347580.png" alt="image-20230113164347580"></p>
<p>改善第51个点，魔改算法为</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">n, d = x.shape</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> norm == <span class="string">&#x27;max&#x27;</span>:  <span class="comment"># max norm:</span></span><br><span class="line">    p = np.inf</span><br><span class="line">    log_c_d = <span class="number">0</span>  <span class="comment"># volume of the d-dimensional unit ball</span></span><br><span class="line"><span class="keyword">elif</span> norm == <span class="string">&#x27;euclidean&#x27;</span>:  <span class="comment"># euclidean norm</span></span><br><span class="line">    p = <span class="number">2</span></span><br><span class="line">    log_c_d = (d/<span class="number">2.</span>) * log(np.pi) - log(gamma(d/<span class="number">2.</span> + <span class="number">1</span>))</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">raise</span> NotImplementedError(</span><br><span class="line">        <span class="string">&quot;Variable &#x27;norm&#x27; either &#x27;max&#x27; or &#x27;euclidean&#x27;&quot;</span>)</span><br><span class="line">kdtree = cKDTree(x)</span><br><span class="line"><span class="comment"># query all points -- k+1 as query point also in initial set</span></span><br><span class="line"><span class="comment"># distances, _ = kdtree.query(x, k + 1, eps=0, p=norm)</span></span><br><span class="line">distances, _ = kdtree.query(x, k + <span class="number">1</span>, eps=<span class="number">0</span>, p=p)</span><br><span class="line">distances = distances[:, -<span class="number">1</span>]</span><br><span class="line">print(<span class="string">&quot;distances11 &quot;</span>, <span class="built_in">len</span>(distances))</span><br><span class="line">print(<span class="string">&quot;x11 &quot;</span>, x[<span class="number">0</span>, <span class="number">1</span>], <span class="string">&quot; distances &quot;</span>, distances[<span class="number">0</span>])</span><br><span class="line"><span class="keyword">for</span> cur <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(x)):</span><br><span class="line">    <span class="keyword">if</span> (x[cur, <span class="number">0</span>] &lt; distances[cur]):</span><br><span class="line">        value = x[cur, <span class="number">0</span>] + <span class="number">360.0</span></span><br><span class="line">        distances1, _ = kdtree.query([value, x[cur, <span class="number">1</span>]], k, eps=<span class="number">0</span>, p=p)</span><br><span class="line">        print(<span class="string">&quot; cur &quot;</span>, cur, <span class="string">&quot; va &quot;</span>, value, <span class="string">&quot; distances1 &quot;</span>,</span><br><span class="line">              distances1, <span class="string">&quot; qian &quot;</span>, distances[cur])</span><br><span class="line">        <span class="comment"># print(&quot; distances1 &quot;, distances[cur])</span></span><br><span class="line">        distances[cur] = <span class="built_in">min</span>(distances[cur], distances1)</span><br><span class="line">    <span class="keyword">elif</span> (x[cur, <span class="number">0</span>] &gt; <span class="number">360.0</span>-distances[cur]):</span><br><span class="line">        value = x[cur, <span class="number">0</span>] - <span class="number">360.0</span></span><br><span class="line">        print(<span class="string">&quot; va &quot;</span>, value)</span><br><span class="line">        distances1, _ = kdtree.query([value,  x[cur, <span class="number">1</span>]], k, eps=<span class="number">0</span>, p=p)</span><br><span class="line">        distances[cur] = <span class="built_in">min</span>(distances[cur], distances1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(&quot;distances &quot;, distances)</span></span><br><span class="line"><span class="comment"># enforce non-zero distances</span></span><br><span class="line">distances[distances &lt; min_dist] = min_dist</span><br><span class="line"></span><br><span class="line"><span class="comment"># where did the 2 come from? radius -&gt; diameter</span></span><br><span class="line">sum_log_dist = np.<span class="built_in">sum</span>(log(<span class="number">2</span>*distances))</span><br><span class="line">h = -digamma(k) + digamma(n) + log_c_d + (d / <span class="built_in">float</span>(n)) * sum_log_dist</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> h</span><br></pre></td></tr></table></figure>
<p>h值为11.33087（魔改后，虽然变小 ，考虑到左右宽度）</p>
<hr>
<p>接下来改为matlab</p>
<p>网上找的代码</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/john_xia/article/details/107563005">https://blog.csdn.net/john_xia/article/details/107563005</a> 不好用 直接用内置函数</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">data = [<span class="number">2</span> <span class="number">3</span>;</span><br><span class="line">    <span class="number">5</span> <span class="number">4</span>;</span><br><span class="line">    <span class="number">9</span> <span class="number">6</span>;</span><br><span class="line">    <span class="number">4</span> <span class="number">7</span>;</span><br><span class="line">    <span class="number">8</span> <span class="number">1</span>;</span><br><span class="line">    <span class="number">7</span> <span class="number">2</span>];</span><br><span class="line">Mdl = KDTreeSearcher(data)</span><br><span class="line">[n,d] = knnsearch(Mdl,[<span class="number">6</span>,<span class="number">3.1</span>],<span class="string">&#x27;k&#x27;</span>,<span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<p>n =</p>
<pre><code> 2     6     5     1     3     4
</code></pre><p>d =</p>
<pre><code>1.3454    1.4866    2.9000    4.0012    4.1725    4.3829
</code></pre><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">clear;close all;clc;</span><br><span class="line">tic;</span><br><span class="line">M = csvread(<span class="string">&#x27;J2000_5_hor.csv&#x27;</span>);</span><br><span class="line">points = M(:, <span class="number">2</span>:<span class="number">3</span>);</span><br><span class="line">k = <span class="number">1</span>;</span><br><span class="line">Mdl = KDTreeSearcher(points);</span><br><span class="line">[n,d] = knnsearch(Mdl,points,<span class="string">&#x27;k&#x27;</span>,k+<span class="number">1</span>);</span><br><span class="line">distances = d(:,<span class="keyword">end</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> : <span class="built_in">length</span>(points)</span><br><span class="line">    <span class="keyword">if</span> ( points(<span class="built_in">i</span>,<span class="number">1</span>) &lt; distances(<span class="built_in">i</span>) ) </span><br><span class="line">        value = points(<span class="built_in">i</span>,<span class="number">1</span>) + <span class="number">360.0</span>;</span><br><span class="line">        [~, dd] = knnsearch(Mdl,[value, points(<span class="built_in">i</span>, <span class="number">2</span>)],<span class="string">&#x27;k&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">        distances(<span class="built_in">i</span>) = <span class="built_in">min</span>(distances(<span class="built_in">i</span>), dd);</span><br><span class="line">    <span class="keyword">elseif</span> (points(<span class="built_in">i</span>, <span class="number">1</span>) &gt; <span class="number">360.0</span>-distances(<span class="built_in">i</span>) ) </span><br><span class="line">        value = points(<span class="built_in">i</span>,<span class="number">1</span>) - <span class="number">360.0</span>;</span><br><span class="line">        [~, dd] = knnsearch(Mdl,[value, points(<span class="built_in">i</span>, <span class="number">2</span>)],<span class="string">&#x27;k&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">        distances(<span class="built_in">i</span>) = <span class="built_in">min</span>(distances(<span class="built_in">i</span>), dd);        </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">Copy_2_of_totalH(distances,<span class="built_in">length</span>(points))</span><br><span class="line">toc;</span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">h</span> =  <span class="title">Copy_2_of_totalH</span><span class="params">(distances, len)</span></span></span><br><span class="line">    d = <span class="number">2</span>;</span><br><span class="line">    log_c_d = (d/<span class="number">2.</span>) * <span class="built_in">log</span>(<span class="built_in">pi</span>) - <span class="built_in">log</span>(<span class="built_in">gamma</span>(d/<span class="number">2</span> + <span class="number">1</span>));</span><br><span class="line">    sum_log_dist = sum(<span class="built_in">log</span>(<span class="number">2</span>*distances));</span><br><span class="line">    h = - <span class="built_in">psi</span>(<span class="number">1</span>) + <span class="built_in">psi</span>(len) + log_c_d + (d/len) * sum_log_dist;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>验证是对的</p>
<p>接着</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%% 模拟退火求解选点问题 直接计算h 更慢  % 466</span></span><br><span class="line">clear all; clc; close all;</span><br><span class="line">tic</span><br><span class="line"><span class="comment">% load points;</span></span><br><span class="line">M = csvread(<span class="string">&#x27;J2000_5_hor.csv&#x27;</span>);</span><br><span class="line">points = M(:, <span class="number">2</span>:<span class="number">3</span>);</span><br><span class="line"><span class="comment">% points = sort(points);</span></span><br><span class="line">rng(<span class="string">&#x27;shuffle&#x27;</span>)  <span class="comment">% 控制随机数的生成，否则每次打开matlab得到的结果都一样</span></span><br><span class="line">len = <span class="number">50</span>;</span><br><span class="line">map = [<span class="number">1</span>:len,<span class="number">1</span>:len];</span><br><span class="line"></span><br><span class="line"><span class="comment">%% 参数初始化</span></span><br><span class="line">T0 = <span class="number">1000</span>;   <span class="comment">% 初始温度</span></span><br><span class="line">T = T0; <span class="comment">% 迭代中温度会发生改变，第一次迭代时温度就是T0</span></span><br><span class="line">maxgen = <span class="number">800</span>;  <span class="comment">% 最大迭代次数</span></span><br><span class="line">Lk = <span class="number">200</span>;  <span class="comment">% 每个温度下的迭代次数</span></span><br><span class="line">alfa = <span class="number">0.95</span>;  <span class="comment">% 温度衰减系数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%%  随机生成一个初始解</span></span><br><span class="line">A = int32(<span class="number">1</span>:<span class="built_in">length</span>(points));</span><br><span class="line">random_num = A(randperm(<span class="built_in">numel</span>(A),len));</span><br><span class="line">index0 = <span class="built_in">sort</span>(random_num);</span><br><span class="line">h0 = Copy_2_of_totalH(points, index0);</span><br><span class="line"></span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;初始方案是：&#x27;</span>); <span class="built_in">disp</span>(mat2str(index0))</span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;此时最优值是：&#x27;</span>); <span class="built_in">disp</span>(h0)</span><br><span class="line">min_money = h0;     <span class="comment">% 初始化找到的最佳的解对应的花费为money0</span></span><br><span class="line">MONEY = <span class="built_in">zeros</span>(maxgen,<span class="number">1</span>); <span class="comment">% 记录每一次外层循环结束后找到的min_money (方便画图）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 模拟退火过程</span></span><br><span class="line"><span class="keyword">for</span> iter = <span class="number">1</span> : maxgen  <span class="comment">% 外循环, 我这里采用的是指定最大迭代次数</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> : Lk  <span class="comment">%  内循环，在每个温度下开始迭代</span></span><br><span class="line">        index = index0;</span><br><span class="line">        x_num = index(randperm(<span class="built_in">numel</span>(index),<span class="number">1</span>));</span><br><span class="line">        x = <span class="built_in">find</span>(index == x_num);</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        shengxia = setxor(A, index);</span><br><span class="line">        y_num = shengxia(randperm(<span class="built_in">numel</span>(shengxia),<span class="number">1</span>));</span><br><span class="line">        index(x) = y_num;</span><br><span class="line">        index = <span class="built_in">sort</span>(index);</span><br><span class="line"></span><br><span class="line">        index1 = index;  <span class="comment">% 调用我们自己写的gen_new_way函数生成新的方案</span></span><br><span class="line"></span><br><span class="line">        h1 = Copy_2_of_totalH(points, index1);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> h1 &gt; h0    <span class="comment">% 如果新方案的花费小于当前方案的花费</span></span><br><span class="line">            index0 = index1; <span class="comment">% 更新当前方案为新方案</span></span><br><span class="line">            h0 = h1;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            p = <span class="built_in">exp</span>((h1 - h0)/T); <span class="comment">% 根据Metropolis准则计算一个概率</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">rand</span>(<span class="number">1</span>) &lt; p   <span class="comment">% 生成一个随机数和这个概率比较，如果该随机数小于这个概率</span></span><br><span class="line">                index0 = index1; <span class="comment">% 更新当前方案为新方案</span></span><br><span class="line">                h0 = h1;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="comment">% 判断是否要更新找到的最佳的解</span></span><br><span class="line">        <span class="keyword">if</span> h0 &gt; min_money  <span class="comment">% 如果当前解更好，则对其进行更新</span></span><br><span class="line">            min_money = h0;  <span class="comment">% 更新最大的花费</span></span><br><span class="line">            best_way = index1;  <span class="comment">% 更新找到的最佳方案</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    MONEY(iter) = min_money; <span class="comment">% 保存本轮外循环结束后找到的最小花费</span></span><br><span class="line">    T = alfa*T;   <span class="comment">% 温度下降</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;最佳的方案是：&#x27;</span>); <span class="built_in">disp</span>(mat2str(best_way))</span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;此时最优值是：&#x27;</span>); <span class="built_in">disp</span>(min_money)</span><br><span class="line"></span><br><span class="line"><span class="comment">%% 画出每次迭代后找到的最佳方案的图形</span></span><br><span class="line"><span class="built_in">figure</span></span><br><span class="line"><span class="built_in">plot</span>(<span class="number">1</span>:maxgen,MONEY,<span class="string">&#x27;b-&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;迭代次数&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;最小花费&#x27;</span>);</span><br><span class="line">toc</span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">h</span> =  <span class="title">Copy_2_of_totalH</span><span class="params">(points,index)</span></span></span><br><span class="line">    len = <span class="built_in">length</span>(index);</span><br><span class="line">    point = points(index, :);</span><br><span class="line">    k = <span class="number">1</span>;</span><br><span class="line">    Mdl = KDTreeSearcher(point);</span><br><span class="line">    [n,d] = knnsearch(Mdl,point,<span class="string">&#x27;k&#x27;</span>,k+<span class="number">1</span>);</span><br><span class="line">    distances = d(:,<span class="keyword">end</span>);</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> : <span class="built_in">length</span>(point)</span><br><span class="line">        <span class="keyword">if</span> ( point(<span class="built_in">i</span>,<span class="number">1</span>) &lt; distances(<span class="built_in">i</span>) ) </span><br><span class="line">            value = point(<span class="built_in">i</span>,<span class="number">1</span>) + <span class="number">360.0</span>;</span><br><span class="line">            [~, dd] = knnsearch(Mdl,[value, point(<span class="built_in">i</span>, <span class="number">2</span>)],<span class="string">&#x27;k&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">            distances(<span class="built_in">i</span>) = <span class="built_in">min</span>(distances(<span class="built_in">i</span>), dd);</span><br><span class="line">        <span class="keyword">elseif</span> (point(<span class="built_in">i</span>, <span class="number">1</span>) &gt; <span class="number">360.0</span>-distances(<span class="built_in">i</span>) ) </span><br><span class="line">            value = point(<span class="built_in">i</span>,<span class="number">1</span>) - <span class="number">360.0</span>;</span><br><span class="line">            [~, dd] = knnsearch(Mdl,[value, point(<span class="built_in">i</span>, <span class="number">2</span>)],<span class="string">&#x27;k&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">            distances(<span class="built_in">i</span>) = <span class="built_in">min</span>(distances(<span class="built_in">i</span>), dd);        </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    d = <span class="number">2</span>;</span><br><span class="line">    log_c_d = (d/<span class="number">2.</span>) * <span class="built_in">log</span>(<span class="built_in">pi</span>) - <span class="built_in">log</span>(<span class="built_in">gamma</span>(d/<span class="number">2</span> + <span class="number">1</span>));</span><br><span class="line">    sum_log_dist = sum(<span class="built_in">log</span>(<span class="number">2</span>*distances));</span><br><span class="line">    h = - <span class="built_in">psi</span>(<span class="number">1</span>) + <span class="built_in">psi</span>(len) + log_c_d + (d/len) * sum_log_dist;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>初始方案是：<br>[34 38 53 80 81 111 121 134 140 143 194 203 217 230 233 242 246 253 260 271 272 273 287 288 364 370 371 373 411 413 420 472 479 488 500 508 527 571 593 603 615 624 628 632 641 642 647 651 673 684]<br>此时最优值是：<br>   11.6156</p>
<p>最佳的方案是：<br>[16 20 22 31 36 40 41 50 52 53 66 68 75 77 85 93 131 149 150 156 164 194 213 244 274 323 345 351 355 388 394 403 415 426 447 490 493 504 510 557 565 566 616 637 645 658 660 664 665 703]<br>此时最优值是：<br>   13.4517</p>
<p><code>历时 57.334977 秒。</code></p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230114090732190.png" alt="image-20230114090732190"></p>
<p>vscode python 验证</p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230114091618050.png" alt="image-20230114091618050"></p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230114093427744.png" alt="image-20230114093427744"></p>
<p>选择了这些点</p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230114093457076.png" alt="image-20230114093457076"></p>
<hr>
<p>2023/2/3 续</p>
<p>但是耗时过长</p>
<p>由于每次只替换一个点，因此可以快速计算，函数(一堆点集，要替换的点，新点)</p>
<p>现在还需要增加一个功能，就是记录那50个点中最近的点的序号</p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230203213229514.png" alt="image-20230203213229514"></p>
<p>找最近的点，如果是要被删的，那么就重新计算这些点，但是要增加的点呢</p>
<p>还是需要全部进行查询最近点 </p>
<p>所以该改进点只得作罢</p>
<hr>
<p>开始写文章吧</p>
<hr>
<p>画圆</p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230208160758706.png" alt="image-20230208160758706"></p>
<p><a target="_blank" rel="noopener" href="https://ww2.mathworks.cn/help/matlab/ref/cylinder.html">https://ww2.mathworks.cn/help/matlab/ref/cylinder.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40525909/article/details/106636093">https://blog.csdn.net/weixin_40525909/article/details/106636093</a></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">clc;clear all;</span><br><span class="line">t = <span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">1</span>);</span><br><span class="line">a = <span class="built_in">size</span>(t); </span><br><span class="line">r = <span class="number">1</span> * <span class="built_in">ones</span>(a);</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>);</span><br><span class="line"><span class="comment">% polar(t,r,&#x27;w&#x27;);</span></span><br><span class="line">polar([<span class="number">0</span>],[<span class="number">0</span>],<span class="string">&#x27;w&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="comment">% cylinder()</span></span><br><span class="line">[X,Y,Z] = cylinder(<span class="number">1</span>,<span class="number">400</span>);</span><br><span class="line">Z = Z+<span class="number">0.3</span>;</span><br><span class="line">surf(X,Y,Z);</span><br><span class="line">view(<span class="number">90</span>,<span class="number">30</span>)</span><br><span class="line">shading flat </span><br><span class="line">colorbar</span><br><span class="line">opengl(<span class="string">&#x27;save&#x27;</span>,<span class="string">&#x27;hardwarebasic&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>画好红 插入灯光，修改颜色，去除坐标点，加上°，加上colorbar,右击打开颜色图编辑器，指定颜色，删除颜色 设置两头黑，P图。</p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230209143812223.png" alt="image-20230209143812223"></p>
<hr>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">clf;</span><br><span class="line"><span class="comment">% box on;</span></span><br><span class="line">axis equal;</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">60</span> <span class="number">120</span> <span class="number">180</span> <span class="number">240</span> <span class="number">300</span> <span class="number">360</span>])</span><br><span class="line">yticks([<span class="number">0</span> <span class="number">30</span> <span class="number">60</span> <span class="number">90</span>])</span><br><span class="line">xlim([<span class="number">-10</span> <span class="number">370</span>]);</span><br><span class="line">ylim([<span class="number">-10</span> <span class="number">100</span>]);</span><br><span class="line"><span class="comment">% grid on;</span></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">scatter</span>([<span class="number">10</span>,<span class="number">20</span>,<span class="number">350</span>,<span class="number">370</span>],[<span class="number">45</span>,<span class="number">20</span>,<span class="number">50</span>,<span class="number">45</span>],<span class="number">12</span>);</span><br><span class="line">xt=get(gca,<span class="string">&#x27;xtick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(xt);</span><br><span class="line">	xt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,xt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;xticklabel&#x27;</span>,xt1);</span><br><span class="line">yt=get(gca,<span class="string">&#x27;ytick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(yt);</span><br><span class="line">	yt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,yt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;yticklabel&#x27;</span>,yt1);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">90</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">0</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">360</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="comment">% xlabel(&#x27;\bf 方位轴&#x27;);</span></span><br><span class="line"><span class="comment">% ylabel(&#x27;\bf 高度轴&#x27;);</span></span><br><span class="line">r = pdist([[<span class="number">10</span>,<span class="number">45</span>];[<span class="number">20</span>,<span class="number">20</span>]],<span class="string">&#x27;euclidean&#x27;</span>);</span><br><span class="line">rectangle(<span class="string">&#x27;position&#x27;</span>,[<span class="number">10</span>-r,<span class="number">45</span>-r,<span class="number">2</span>*r,<span class="number">2</span>*r],<span class="string">&#x27;curvature&#x27;</span>,[<span class="number">1</span>,<span class="number">1</span>],<span class="string">&#x27;LineStyle&#x27;</span>,<span class="string">&#x27;:&#x27;</span>);</span><br><span class="line">rectangle(<span class="string">&#x27;position&#x27;</span>,[<span class="number">370</span>-r,<span class="number">45</span>-r,<span class="number">2</span>*r,<span class="number">2</span>*r],<span class="string">&#x27;curvature&#x27;</span>,[<span class="number">1</span>,<span class="number">1</span>],<span class="string">&#x27;LineStyle&#x27;</span>,<span class="string">&#x27;:&#x27;</span>);</span><br><span class="line">theta=<span class="number">0</span>:<span class="number">0.001</span>:<span class="number">2</span>*<span class="built_in">pi</span>;</span><br><span class="line">Circle1=<span class="number">10</span>+r*<span class="built_in">cos</span>(theta);</span><br><span class="line">Circle2=<span class="number">45</span>+r*<span class="built_in">sin</span>(theta);</span><br><span class="line">Circle1(Circle1 &lt; <span class="number">0</span>) = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">plot</span>(Circle1,Circle2,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">0.5</span>);</span><br><span class="line"></span><br><span class="line">Circle1=<span class="number">370</span>+r*<span class="built_in">cos</span>(theta);</span><br><span class="line">Circle2=<span class="number">45</span>+r*<span class="built_in">sin</span>(theta);</span><br><span class="line">Circle1(Circle1 &gt; <span class="number">360</span>) = <span class="number">360</span>;</span><br><span class="line"><span class="built_in">plot</span>(Circle1,Circle2,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">0.5</span>);</span><br><span class="line">txt = <span class="string">&#x27; M&#x27;</span>;</span><br><span class="line">text(<span class="number">10</span>,<span class="number">45</span>,txt);</span><br><span class="line">txt = <span class="string">&#x27; N&#x27;</span>;</span><br><span class="line">text(<span class="number">20</span>,<span class="number">20</span>,txt)</span><br><span class="line">txt = <span class="string">&#x27; M^&#123;&#x27;&#x27;&#125;&#x27;</span>;</span><br><span class="line">text(<span class="number">360</span>,<span class="number">45</span>,txt);</span><br><span class="line">txt = <span class="string">&#x27; P&#x27;</span>;</span><br><span class="line">text(<span class="number">350</span>,<span class="number">50</span>,txt)</span><br></pre></td></tr></table></figure>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230209164542299.png" alt="image-20230209164542299"></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/luochao5862426/article/details/89219311">https://blog.csdn.net/luochao5862426/article/details/89219311</a></p>
<p>Matlab图形高清插入word文档的几种方法。</p>
<hr>
<p>在选取恒星点的k近邻时，需要考虑的问题是如何对星点进行快速k近邻搜索。k近邻最简单的实现是枚举搜索，即对选取星点与其他星点计算距离，时间复杂度为                                。当恒星点集很大时，计算非常耗时。可以使用特殊的数据结构存储星点位置，减小计算次数，以提高k近邻搜索效率。</p>
<p>​    KD树是一种对K维空间中的数据进行组织和存储以便进行快速搜索查找的二叉树形数据结构，用垂直于坐标轴的超平面将K维空间划分成一系列的K维超矩形区域。在本文中，KD树的每个节点对应于一个由方位轴和高度轴组成的二维矩形区域，构造得到的KD树是平衡二叉树，搜索查找的时间复杂度为  。</p>
<p>​    </p>
<p>对于输入的恒星坐标点集  ，其中  ，  ，  ，<strong>构造**</strong>KD<strong>**树</strong>的方法如下：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>BuildKDTree(star pointsT, tree_depth)</th>
</tr>
</thead>
<tbody>
<tr>
<td>1)     //  根据树深度的奇偶性来选择AE维度</td>
</tr>
<tr>
<td>2)     axis  = tree_depth &amp; 1</td>
</tr>
<tr>
<td>3)     //  选择第axis维度的中间值为根节点进行KD树的构造  4)     Select  median by axis from points  5)     //  构造节点和子树  6)     node  = median  7)     node.left  = KDTree(points in subList(0, median), axis, tree_depth + 1)  8)     node.right  = KDTree(points in subList(median+1, points.end()), axis, tree_depth + 1)  9)     return  node</td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>（1）构造根节点：根节点的深度为0，对应于望远镜两轴指向上半天区所组成的二维空间，其中方位轴范围为0°至360°，高度轴范围为0°至90°。接着，重复通过下面（2）的递归方法，不断地对二维空间进行切分，生成子节点。</p>
<p>（2）重复：对深度为奇数/偶数j的节点重复E/A轴切分：选择E/A轴为坐标轴，以该节点的区域中所有恒星的E/A坐标中位数为切分点，将该节点对应的二维区域切分为两个子区域。由该节点生成深度为j+1的左右子节点，左子节点对应坐标E/A小于切分点的子区域，右子节点对应坐标E/A大于切分点的子区域。并将落在该二维平面上的恒星点保存在该节点。</p>
<p>（3）直到两个子区域内没有恒星时，构造KD树停止，完成划分。</p>
<hr>
<p>​    利用KD树可以减少搜索的计算量。在望远镜两轴指向形成的圆柱面上，为一个恒星点搜索其k近邻与传统的KD树搜索策略有所差异，本文提出改进的KD树搜索策略IKDS，首先找到包含选取点的叶子节点，然后由该节点出发，依次回退到父节点；不断查找所选星点的最近邻，当不存在更近的节点时中止。具体方法如下：</p>
<hr>
<p>利用KD树可以省去对大部分数据点的搜索，从而减少搜索的计算量。给定一个恒星点，搜索其最近邻，首先找到包含选取点的叶子节点，然后由该节点出发，依次回退到父节点；不断查找所选星点的最近邻，当不存在更近的节点时中止。具体方法如下</p>
<hr>
<p><strong>适应于圆柱面上的**</strong>KD<strong>**树搜索策略</strong></p>
<p>​    利用KD树可以省去对大部分数据点的搜索，从而减少搜索的计算量。给定一个恒星点，搜索其最近邻，首先找到包含选取点的叶子节点，然后由该节点出发，依次回退到父节点；不断查找所选星点的最近邻，当不存在更近的节点时中止。由于恒星位于高度轴和方位轴两个垂直轴所组成的圆柱面上，KD树的搜索策略有所不同，具体方法如下：</p>
<p>​    （1）在KD树种找到包含选取点的叶子节点，并以此叶子节点为“当前最近点”。递归地向上回退，在每个节点进行以下（2）（3）操作：</p>
<p>​    （2）如果该节点保存的恒星点比当前最近点更接近选取点，则该节点为当前最近点。</p>
<p>（3）当前最近点一定存在于该节点的一个子节点所对应的区域。检查该子节点的父节点的另一个子节点所对应的区域是否有更近的点。具体的，检查另一个子节点对应的区域是否与目标点为圆心，与目标点与当前最近点间的距离为半径的圆相交。如果相交，可能在另一个子节点对应的区域内存在距离目标更近的点，移动到另一个子节点。接着，递归地进行最近邻搜索。如果不相交，往上回退。</p>
<p>（4）当回退到根节点时，搜索结束。搜索得到的“当前最近点”即为选取点的最近邻。当选取点的方位轴                                坐标减去最近邻距离小于0°时，以选取点为中心，最近邻距离为半径的最近邻圆与0°方位轴相切，可能存在方位轴为  （  为一个较小的数）的星点距离选取星点更近。如上图所示，使用原始KD树搜索找到目标星点M的最近邻N，但方位轴尾端可能存在星点P，距离选取星点M更近。因此需要重新计算选取虚拟星点  的最近邻距离，与  的最近邻距离相比取较小值；同样的，当方位轴  坐标加上最近邻距离大于360°时，还需要计算选取虚拟星点  的最近邻距离。</p>
<hr>
<p>正交网格法</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">clear all;  close all;clc;</span><br><span class="line"><span class="comment">% tic</span></span><br><span class="line"><span class="comment">% load points;</span></span><br><span class="line">M = csvread(<span class="string">&#x27;J2000_5_hor.csv&#x27;</span>);</span><br><span class="line">points = M(:, <span class="number">2</span>:<span class="number">3</span>);</span><br><span class="line"><span class="comment">% points = sortrows(points,1);</span></span><br><span class="line">rng(<span class="string">&#x27;shuffle&#x27;</span>)  <span class="comment">% 控制随机数的生成，否则每次打开matlab得到的结果都一样</span></span><br><span class="line">len = <span class="number">50</span>;</span><br><span class="line"><span class="comment">%%</span></span><br><span class="line">jiange = <span class="number">5</span>;</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line">ret = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt; <span class="number">90</span></span><br><span class="line">    tmp = <span class="built_in">find</span>( (points(:,<span class="number">1</span>)&gt; x) &amp; (points(:,<span class="number">2</span>) &gt;y) &amp; (points(:,<span class="number">1</span>)&lt;= x+ jiange) &amp; (points(:,<span class="number">2</span>)&lt;= y+ jiange) );</span><br><span class="line">    <span class="keyword">if</span> ( ~<span class="built_in">isempty</span>(tmp) )</span><br><span class="line">        ret = [ret; points(tmp(<span class="number">1</span>),:)];</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    y = y + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( y &gt;= <span class="number">90</span> ) </span><br><span class="line">        y = <span class="number">0</span>;</span><br><span class="line">        x = x + jiange;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">% scatter(points(:,1), points(:,2));</span></span><br><span class="line"><span class="built_in">scatter</span>(ret(:,<span class="number">1</span>), ret(:,<span class="number">2</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>选自 Vedder, J. D., STAR TRACKERS, STAR CATALOGS, AND ATTITUDE DETERMINATION - PROBABILISTIC ASPECTS OF SYSTEM-DESIGN. <em>J. Guid. Control Dyn.</em> <strong>1993,</strong> 16, (3), 498-504.</p>
<p>例如间隔为5°，选择了487个点</p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230215113153528.png" alt="image-20230215113153528"></p>
<p>间隔26.6°可以选择50个星</p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230215113339772.png" alt="image-20230215113339772"></p>
<p>选择索引 ret = [ret; tmp(1)];</p>
<p>计算Copy_2_of_totalH(points,ret)熵值，12.5235，所有星是11.3309</p>
<p>找寻最近点 确实很快 0.05秒但存在问题 就是找寻50个点需要的jiange</p>
<p>用二分法试试</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">clear all;  close all;clc;</span><br><span class="line">tic</span><br><span class="line"><span class="comment">% load points;</span></span><br><span class="line">M = csvread(<span class="string">&#x27;J2000_5_hor.csv&#x27;</span>);</span><br><span class="line">points = M(:, <span class="number">2</span>:<span class="number">3</span>);</span><br><span class="line"><span class="comment">% points = sortrows(points,1);</span></span><br><span class="line">rng(<span class="string">&#x27;shuffle&#x27;</span>)  <span class="comment">% 控制随机数的生成，否则每次打开matlab得到的结果都一样</span></span><br><span class="line">len = <span class="number">50</span>;</span><br><span class="line"><span class="comment">%%</span></span><br><span class="line"><span class="comment">% jiange = 26.6;</span></span><br><span class="line">left = <span class="number">0</span>;</span><br><span class="line">right = <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> left &lt; right</span><br><span class="line">    ret = [];</span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    y = <span class="number">0</span>;</span><br><span class="line">    jiange = double( left + right ) / <span class="number">2</span></span><br><span class="line">    <span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt; <span class="number">90</span></span><br><span class="line">        tmp = <span class="built_in">find</span>( (points(:,<span class="number">1</span>)&gt; x) &amp; (points(:,<span class="number">2</span>) &gt;y) &amp; (points(:,<span class="number">1</span>)&lt;= x+ jiange) &amp; (points(:,<span class="number">2</span>)&lt;= y+ jiange) );</span><br><span class="line">        <span class="keyword">if</span> ( ~<span class="built_in">isempty</span>(tmp) )</span><br><span class="line">    <span class="comment">%         ret = [ret; points(tmp(1),:)];</span></span><br><span class="line">                ret = [ret; tmp(<span class="number">1</span>)];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        y = y + jiange;</span><br><span class="line">        <span class="keyword">if</span> ( y &gt;= <span class="number">90</span> ) </span><br><span class="line">            y = <span class="number">0</span>;</span><br><span class="line">            x = x + jiange;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">length</span>(ret)</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">length</span>(ret) == <span class="number">50</span> ) </span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">elseif</span> ( <span class="built_in">length</span>(ret) &gt; <span class="number">50</span> ) </span><br><span class="line">        left = jiange;</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        right = jiange;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">toc;</span><br><span class="line"><span class="comment">% scatter(points(:,1), points(:,2));</span></span><br><span class="line"><span class="comment">% scatter(ret(:,1), ret(:,2));</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>jiange =</p>
<p>   26.3672</p>
<p>ans =50</p>
<p>历时 0.044573 秒。 很快</p>
<hr>
<p>画结果图</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="built_in">plot</span>([<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>,<span class="number">60</span>],[<span class="number">11.4426</span>	<span class="number">11.5679</span>	<span class="number">11.5762</span>	<span class="number">11.6659</span>],<span class="string">&#x27;-bo&#x27;</span>);<span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>([<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>,<span class="number">60</span>],[<span class="number">12.5960</span>	<span class="number">12.5311</span>	<span class="number">12.6415</span>	<span class="number">12.6410</span>],<span class="string">&#x27;-v&#x27;</span>,<span class="string">&#x27;Color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>]);<span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>([<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>,<span class="number">60</span>],[<span class="number">12.8165</span>	<span class="number">12.7812</span>	<span class="number">12.8322</span>	<span class="number">12.8459</span>],<span class="string">&#x27;-^&#x27;</span>,<span class="string">&#x27;Color&#x27;</span>,[<span class="number">0.5</span> <span class="number">0</span> <span class="number">0.8</span>]);<span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>([<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>,<span class="number">60</span>],[<span class="number">13.5425</span>,<span class="number">13.4567</span>,<span class="number">13.4374</span>,<span class="number">13.3992</span>],<span class="string">&#x27;-rsquare&#x27;</span>);<span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>([<span class="number">30</span>,<span class="number">60</span>],[<span class="number">11.3309</span>,<span class="number">11.3309</span>],<span class="string">&#x27;--k&#x27;</span>);<span class="built_in">hold</span> on;</span><br><span class="line">xticks([<span class="number">30</span> <span class="number">40</span> <span class="number">50</span> <span class="number">60</span>])</span><br><span class="line">yticks([<span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span>])</span><br><span class="line">xlim([<span class="number">27</span> <span class="number">63</span>]);</span><br><span class="line">ylim([<span class="number">11</span> <span class="number">14.5</span>]);</span><br><span class="line"><span class="built_in">legend</span>( <span class="string">&#x27;1:Random&#x27;</span>,<span class="string">&#x27;2:RGM&#x27;</span>, <span class="string">&#x27;3:SO&#x27;</span>, <span class="string">&#x27;4:MKLE&#x27;</span>,<span class="string">&#x27;5:All&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;n&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;KL 熵&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">plot</span>([<span class="number">27</span>,<span class="number">30</span>,<span class="number">44</span>,<span class="number">48</span>, <span class="number">52</span>],[<span class="number">11.0260</span>	<span class="number">11.5331</span>	<span class="number">11.4096</span>	<span class="number">11.0756</span>	<span class="number">11.8410</span>],<span class="string">&#x27;-bo&#x27;</span>);<span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>([<span class="number">27</span>,<span class="number">30</span>,<span class="number">44</span>,<span class="number">48</span>, <span class="number">52</span>],[<span class="number">12.2689</span>	<span class="number">12.5960</span>	<span class="number">12.5225</span>	<span class="number">12.5195</span>	<span class="number">12.6379</span>],<span class="string">&#x27;-v&#x27;</span>,<span class="string">&#x27;Color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>]);<span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>([<span class="number">27</span>,<span class="number">30</span>,<span class="number">44</span>,<span class="number">48</span>, <span class="number">52</span>],[<span class="number">13.5609</span>	<span class="number">13.5329</span>	<span class="number">13.4409</span>	<span class="number">13.4240</span>	<span class="number">13.3890</span>],<span class="string">&#x27;-^&#x27;</span>,<span class="string">&#x27;Color&#x27;</span>,[<span class="number">0.5</span> <span class="number">0</span> <span class="number">0.8</span>]);<span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>([<span class="number">27</span>,<span class="number">30</span>,<span class="number">44</span>,<span class="number">48</span>, <span class="number">52</span>],[<span class="number">13.5537</span>	<span class="number">13.3811</span>	<span class="number">13.3753</span>	<span class="number">13.4138</span>	<span class="number">13.2940</span>],<span class="string">&#x27;-rsquare&#x27;</span>);<span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line">xticks([<span class="number">27</span> <span class="number">30</span> <span class="number">44</span> <span class="number">48</span> <span class="number">52</span>])</span><br><span class="line">yticks([<span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span>])</span><br><span class="line">xlim([<span class="number">25</span> <span class="number">55</span>]);</span><br><span class="line">ylim([<span class="number">11</span> <span class="number">14.5</span>]);</span><br><span class="line"><span class="built_in">legend</span>( <span class="string">&#x27;Random&#x27;</span>,<span class="string">&#x27;RGM&#x27;</span>, <span class="string">&#x27;MKLE&#x27;</span>, <span class="string">&#x27;ETRP&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;n&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;KL 熵&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>仿真平台为Windows11操作系统下的Matlab，计算机配置为Intel(R) Core i5-11400F@ 2.6GHz，16GB内存。</p>
<p>没敢写时间</p>
<hr>
<p>初始方案是：<br>[30 43 86 126 134 146 152 183 214 216 232 263 265 278 283 299 307 309 354 363 376 377 379 396 406 424 425 429 435 439 478 485 490 499 522 526 535 556 561 576 602 611 615 625 638 639 692 698 702 705]<br>此时最优值是：<br>   11.1946</p>
<p>最佳的方案是：<br>[8 20 22 36 40 41 42 43 50 53 54 68 74 75 93 97 104 133 150 158 162 189 206 248 274 325 331 343 378 379 380 394 399 413 424 432 460 490 510 514 517 546 576 612 624 647 660 664 699 702]<br>此时最优值是：<br>   13.4316</p>
<p>历时 88.230554 秒。</p>
<hr>
<p>画结果图。</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="built_in">figure</span>;</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">scatter</span>(points(:,<span class="number">1</span>), points(:,<span class="number">2</span>), <span class="number">8</span>)</span><br><span class="line">box on; </span><br><span class="line">axis equal;</span><br><span class="line">xlim([<span class="number">0</span> <span class="number">360</span>]);</span><br><span class="line">ylim([<span class="number">0</span> <span class="number">90</span>]);</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">60</span> <span class="number">120</span> <span class="number">180</span> <span class="number">240</span> <span class="number">300</span> <span class="number">360</span>])</span><br><span class="line">yticks([<span class="number">0</span> <span class="number">30</span> <span class="number">60</span> <span class="number">90</span>])</span><br><span class="line">xlabel(<span class="string">&#x27;方位轴&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;高度轴&#x27;</span>);</span><br><span class="line"><span class="comment">% title(&#x27;Distribution of all stars&#x27;);</span></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"><span class="built_in">scatter</span>(points(best_way,<span class="number">1</span>), points(best_way,<span class="number">2</span>), <span class="number">12</span>)</span><br><span class="line">box on; </span><br><span class="line">axis equal;</span><br><span class="line">xlim([<span class="number">0</span> <span class="number">360</span>]);</span><br><span class="line">ylim([<span class="number">0</span> <span class="number">90</span>]);</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">60</span> <span class="number">120</span> <span class="number">180</span> <span class="number">240</span> <span class="number">300</span> <span class="number">360</span>])</span><br><span class="line">yticks([<span class="number">0</span> <span class="number">30</span> <span class="number">60</span> <span class="number">90</span>])</span><br><span class="line">xlabel(<span class="string">&#x27;\bf Azimuth axis&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;\bf Elevation axis&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;Distribution of selected stars&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230216153601776.png" alt="image-20230216153601776"></p>
<p>或者</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="built_in">figure</span>;</span><br><span class="line"><span class="built_in">scatter</span>(points(:,<span class="number">1</span>), points(:,<span class="number">2</span>), <span class="number">8</span>)</span><br><span class="line">box on; </span><br><span class="line">axis equal;</span><br><span class="line">xlim([<span class="number">0</span> <span class="number">360</span>]);</span><br><span class="line">ylim([<span class="number">0</span> <span class="number">110</span>]);</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">60</span> <span class="number">120</span> <span class="number">180</span> <span class="number">240</span> <span class="number">300</span> <span class="number">360</span>])</span><br><span class="line">yticks([<span class="number">0</span> <span class="number">30</span> <span class="number">60</span> <span class="number">90</span>])</span><br><span class="line">xlabel(<span class="string">&#x27;Azimuth axis&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;Elevation axis&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">scatter</span>(points(best_way,<span class="number">1</span>), points(best_way,<span class="number">2</span>), <span class="number">20</span>,<span class="string">&#x27;filled&#x27;</span>,<span class="string">&#x27;MarkerFaceColor&#x27;</span>,<span class="string">&#x27;#FF8000&#x27;</span>)</span><br><span class="line">xtickformat(<span class="string">&#x27;usd&#x27;</span>)</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;All stars&#x27;</span>, <span class="string">&#x27;Selected stars&#x27;</span>)</span><br><span class="line">xtickformat(<span class="string">&#x27;degrees&#x27;</span>)</span><br><span class="line">ytickformat(<span class="string">&#x27;degrees&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230216154546130.png" alt="image-20230216154546130"></p>
<hr>
<p>画环形图</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">ax = polaraxes;</span><br><span class="line">ax.RAxis.Label.String = <span class="string">&#x27;Elevation&#x27;</span>;</span><br><span class="line">ax.ThetaAxis.Label.String = <span class="string">&#x27;Azimuth&#x27;</span>;</span><br><span class="line">ax.ThetaZeroLocation = <span class="string">&#x27;bottom&#x27;</span>;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">polarscatter(double(points(:,<span class="number">1</span>))./<span class="number">180.0</span> * <span class="built_in">pi</span>,points(:,<span class="number">2</span>),<span class="number">20</span>)</span><br><span class="line">thetalim([<span class="number">0</span> <span class="number">360</span>])</span><br><span class="line">rticks(<span class="number">0</span>:<span class="number">22.5</span>:<span class="number">90</span>)</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">polarscatter(double(points(best_way,<span class="number">1</span>))./<span class="number">180.0</span> * <span class="built_in">pi</span>,points(best_way,<span class="number">2</span>), <span class="number">30</span>,<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;filled&#x27;</span>)</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;All stars&#x27;</span>, <span class="string">&#x27;Selected stars&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax = polaraxes;</span><br><span class="line">ax.RAxis.Label.String = <span class="string">&#x27;Elevation axis&#x27;</span>;</span><br><span class="line">ax.ThetaAxis.Label.String = <span class="string">&#x27;Azimuth axis&#x27;</span>;</span><br><span class="line">ax.ThetaZeroLocation = <span class="string">&#x27;bottom&#x27;</span>;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">polarscatter(double(points(:,<span class="number">1</span>))./<span class="number">180.0</span> * <span class="built_in">pi</span>, <span class="number">90</span>-points(:,<span class="number">2</span>),<span class="number">20</span>)</span><br><span class="line">thetalim([<span class="number">0</span> <span class="number">360</span>])</span><br><span class="line">rticks(<span class="number">0</span>:<span class="number">22.5</span>:<span class="number">90</span>)</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">polarscatter(double(points(best_way,<span class="number">1</span>))./<span class="number">180.0</span> * <span class="built_in">pi</span>, <span class="number">90</span>-points(best_way,<span class="number">2</span>), <span class="number">30</span>,<span class="string">&#x27;filled&#x27;</span>,<span class="string">&#x27;MarkerFaceColor&#x27;</span>,<span class="string">&#x27;#FF8000&#x27;</span>)</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;All stars&#x27;</span>, <span class="string">&#x27;Selected stars&#x27;</span>)</span><br><span class="line">ax.ThetaTickLabel = string(ax.ThetaTickLabel) + char(<span class="number">176</span>)</span><br><span class="line">rticks([<span class="number">0</span> <span class="number">22.5</span> <span class="number">45</span>  <span class="number">67.5</span> <span class="number">90</span>])                        <span class="comment">% 在r = 50,100,200处显示刻度</span></span><br><span class="line">rticklabels(&#123;<span class="string">&#x27;90&#x27;</span>,<span class="string">&#x27;67.5&#x27;</span>,<span class="string">&#x27;45&#x27;</span>,<span class="string">&#x27;22.5&#x27;</span>,<span class="string">&#x27;0&#x27;</span>&#125;)            <span class="comment">% 在刻度线处加标记</span></span><br><span class="line">ax.RTickLabel = string(ax.RTickLabel) + char(<span class="number">176</span>)</span><br><span class="line">ax.RAxisLocation = <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax = polaraxes;</span><br><span class="line">ax.RAxis.Label.String = <span class="string">&#x27;高度轴&#x27;</span>;</span><br><span class="line">ax.ThetaAxis.Label.String = <span class="string">&#x27;方位轴&#x27;</span>;</span><br><span class="line">ax.ThetaZeroLocation = <span class="string">&#x27;bottom&#x27;</span>;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">polarscatter(double(points(best_way,<span class="number">1</span>))./<span class="number">180.0</span> * <span class="built_in">pi</span>, <span class="number">90</span>-points(best_way,<span class="number">2</span>), <span class="number">20</span>)</span><br><span class="line">thetalim([<span class="number">0</span> <span class="number">360</span>])</span><br><span class="line">rticks(<span class="number">0</span>:<span class="number">22.5</span>:<span class="number">90</span>)</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line">ax.ThetaTickLabel = string(ax.ThetaTickLabel) + char(<span class="number">176</span>)</span><br><span class="line">rticks([<span class="number">0</span> <span class="number">22.5</span> <span class="number">45</span>  <span class="number">67.5</span> <span class="number">90</span>])                        <span class="comment">% 在r = 50,100,200处显示刻度</span></span><br><span class="line">rticklabels(&#123;<span class="string">&#x27;90&#x27;</span>,<span class="string">&#x27;67.5&#x27;</span>,<span class="string">&#x27;45&#x27;</span>,<span class="string">&#x27;22.5&#x27;</span>,<span class="string">&#x27;0&#x27;</span>&#125;)            <span class="comment">% 在刻度线处加标记</span></span><br><span class="line">ax.RTickLabel = string(ax.RTickLabel) + char(<span class="number">176</span>)</span><br><span class="line">ax.RAxisLocation = <span class="number">90</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<p>接着做实验</p>
<p>画一个图</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">clear all;  close all;clc;</span><br><span class="line">tic</span><br><span class="line">jiange = <span class="number">22.5</span>;</span><br><span class="line">ret = [];</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt;= <span class="number">90</span></span><br><span class="line">    ret = [ret; x, y];</span><br><span class="line"> </span><br><span class="line">    y = y + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( y &gt; <span class="number">90</span> ) </span><br><span class="line">        y = <span class="number">0</span>;</span><br><span class="line">        x = x + jiange;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">toc;</span><br></pre></td></tr></table></figure>
<p>3个图拼一起</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line">jiange = <span class="number">30</span>;</span><br><span class="line">ret = [];</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt;= <span class="number">90</span></span><br><span class="line">    ret = [ret; x, y];</span><br><span class="line"> </span><br><span class="line">    y = y + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( y &gt; <span class="number">90</span> ) </span><br><span class="line">        y = <span class="number">0</span>;</span><br><span class="line">        x = x + jiange;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">jiange = <span class="number">22.5</span>;</span><br><span class="line">ret1 = [];</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt;= <span class="number">90</span></span><br><span class="line">    ret1 = [ret1; x, y];</span><br><span class="line"> </span><br><span class="line">    y = y + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( y &gt; <span class="number">90</span> ) </span><br><span class="line">        y = <span class="number">0</span>;</span><br><span class="line">        x = x + jiange;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">jiange = <span class="number">18</span>;</span><br><span class="line">ret2 = [];</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt;= <span class="number">90</span></span><br><span class="line">    ret2 = [ret2; x, y];</span><br><span class="line"> </span><br><span class="line">    y = y + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( y &gt; <span class="number">90</span> ) </span><br><span class="line">        y = <span class="number">0</span>;</span><br><span class="line">        x = x + jiange;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">clf;</span><br><span class="line"><span class="comment">% box on;</span></span><br><span class="line">axis equal;</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">60</span> <span class="number">120</span> <span class="number">180</span> <span class="number">240</span> <span class="number">300</span> <span class="number">360</span>])</span><br><span class="line">yticks([<span class="number">0</span> <span class="number">30</span> <span class="number">60</span> <span class="number">90</span>])</span><br><span class="line">xlim([<span class="number">-10</span> <span class="number">370</span>]);</span><br><span class="line">ylim([<span class="number">-10</span> <span class="number">100</span>]);</span><br><span class="line"><span class="comment">% grid on;</span></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line">xt=get(gca,<span class="string">&#x27;xtick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(xt);</span><br><span class="line">	xt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,xt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;xticklabel&#x27;</span>,xt1);</span><br><span class="line">yt=get(gca,<span class="string">&#x27;ytick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(yt);</span><br><span class="line">	yt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,yt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;yticklabel&#x27;</span>,yt1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">xlabel(<span class="string">&#x27;方位轴&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;高度轴&#x27;</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">90</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">0</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">360</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter</span>(ret1(:,<span class="number">1</span>), ret1(:,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230224205020024.png" alt="image-20230224205020024"></p>
<p>n = 120, distances = 18; KL = 18.0668</p>
<p>去掉任意一个星 distance不变 kl = 18.05834851010958</p>
<p>n = 80, distances = 22.5; KL = 18.551770401636414</p>
<p>去掉任意一个星 distance不变 kl = 18.53911217378831</p>
<p>n = 48 dis = 30; KL = 19.187483254228805</p>
<p>19.16620665848412</p>
<hr>
<p>试试三角形</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">clear all;  close all;clc;</span><br><span class="line">jiange = <span class="number">22.5</span>;</span><br><span class="line">ret = [];</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt;= <span class="number">90</span></span><br><span class="line">	<span class="keyword">if</span> x &gt;= <span class="number">0</span></span><br><span class="line">	    ret = [ret; x, y];</span><br><span class="line"> 	<span class="keyword">end</span></span><br><span class="line">    x = x + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( x &gt;= <span class="number">360</span> ) </span><br><span class="line">        x = x - <span class="number">360</span> -jiange/<span class="number">2.0</span>;</span><br><span class="line">        y = y + jiange/<span class="number">2.0</span>*<span class="built_in">sqrt</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230224211806401.png" alt="image-20230224211806401"></p>
<p>存在这种情况</p>
<hr>
<p>试试六边形</p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230224213629088.png" alt="image-20230224213629088"></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">clear all;  close all;clc;</span><br><span class="line">jiange = <span class="number">18</span>;</span><br><span class="line">ret = [];</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt;= <span class="number">90</span></span><br><span class="line">	<span class="keyword">if</span> x &gt;= <span class="number">0</span></span><br><span class="line">	    ret = [ret; x, y];</span><br><span class="line"> 	<span class="keyword">end</span></span><br><span class="line">    x = x + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( x &gt;= <span class="number">360</span> ) </span><br><span class="line">        x = x - <span class="number">360</span> -jiange/<span class="number">2.0</span>;</span><br><span class="line">        y = y + jiange/<span class="number">2.0</span>*<span class="built_in">sqrt</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">ret1 = [];</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> : <span class="number">120</span></span><br><span class="line">    <span class="keyword">if</span> ret(<span class="built_in">i</span>,<span class="number">2</span>) &gt; <span class="number">31</span> &amp;&amp; ret(<span class="built_in">i</span>,<span class="number">2</span>) &lt; <span class="number">32</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">mod</span>(<span class="built_in">i</span>, <span class="number">3</span>) ~= <span class="number">1</span></span><br><span class="line">            ret1 = [ret1;ret(<span class="built_in">i</span>,:)];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> ret(<span class="built_in">i</span>,<span class="number">2</span>) &lt; <span class="number">31</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">mod</span>(<span class="built_in">i</span>, <span class="number">3</span>) ~= <span class="number">0</span></span><br><span class="line">            ret1 = [ret1;ret(<span class="built_in">i</span>,:)];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> ret(<span class="built_in">i</span>,<span class="number">2</span>) &gt; <span class="number">60</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">mod</span>(<span class="built_in">i</span>, <span class="number">3</span>) ~= <span class="number">2</span></span><br><span class="line">            ret1 = [ret1;ret(<span class="built_in">i</span>,:)];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> ret(<span class="built_in">i</span>,<span class="number">2</span>) &gt; <span class="number">32</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">mod</span>(<span class="built_in">i</span>, <span class="number">3</span>) ~= <span class="number">1</span></span><br><span class="line">            ret1 = [ret1;ret(<span class="built_in">i</span>,:)];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">% for i = 1 : 120</span></span><br><span class="line"><span class="comment">%     if mod(i, 3) ~= 0</span></span><br><span class="line"><span class="comment">%         ret1 = [ret1;ret(i,:)];</span></span><br><span class="line"><span class="comment">%     end</span></span><br><span class="line"><span class="comment">% </span></span><br><span class="line"><span class="comment">% end</span></span><br><span class="line"></span><br><span class="line">clear all;  close all;clc;</span><br><span class="line">jiange = <span class="number">22.5</span>;</span><br><span class="line">ret = [];</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt;= <span class="number">90</span></span><br><span class="line">	<span class="keyword">if</span> x &gt;= <span class="number">0</span></span><br><span class="line">	    ret = [ret; x, y];</span><br><span class="line"> 	<span class="keyword">end</span></span><br><span class="line">    x = x + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( x &gt;= <span class="number">360</span> ) </span><br><span class="line">        x = x - <span class="number">360</span> -jiange/<span class="number">2.0</span>;</span><br><span class="line">        y = y + jiange/<span class="number">2.0</span>*<span class="built_in">sqrt</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">ret1 = [];</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> : <span class="number">80</span></span><br><span class="line">    <span class="keyword">if</span> ret(<span class="built_in">i</span>,<span class="number">2</span>) &lt; <span class="number">3</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">mod</span>(<span class="built_in">i</span>, <span class="number">3</span>) ~= <span class="number">0</span></span><br><span class="line">            ret1 = [ret1;ret(<span class="built_in">i</span>,:)];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> ret(<span class="built_in">i</span>,<span class="number">2</span>) &gt; <span class="number">19</span> &amp;&amp; ret(<span class="built_in">i</span>,<span class="number">2</span>) &lt; <span class="number">20</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">mod</span>(<span class="built_in">i</span>, <span class="number">3</span>) ~= <span class="number">2</span></span><br><span class="line">            ret1 = [ret1;ret(<span class="built_in">i</span>,:)];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> ret(<span class="built_in">i</span>,<span class="number">2</span>) &lt; <span class="number">39</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">mod</span>(<span class="built_in">i</span>, <span class="number">3</span>) ~= <span class="number">2</span></span><br><span class="line">            ret1 = [ret1;ret(<span class="built_in">i</span>,:)];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> ret(<span class="built_in">i</span>,<span class="number">2</span>) &gt; <span class="number">60</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">mod</span>(<span class="built_in">i</span>, <span class="number">3</span>) ~= <span class="number">1</span></span><br><span class="line">            ret1 = [ret1;ret(<span class="built_in">i</span>,:)];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> ret(<span class="built_in">i</span>,<span class="number">2</span>) &gt; <span class="number">32</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">mod</span>(<span class="built_in">i</span>, <span class="number">3</span>) ~= <span class="number">1</span></span><br><span class="line">            ret1 = [ret1;ret(<span class="built_in">i</span>,:)];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">jiange = <span class="number">30</span>;</span><br><span class="line">ret = [];</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt;= <span class="number">90</span></span><br><span class="line">	<span class="keyword">if</span> x &gt;= <span class="number">0</span></span><br><span class="line">	    ret = [ret; x, y];</span><br><span class="line"> 	<span class="keyword">end</span></span><br><span class="line">    x = x + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( x &gt;= <span class="number">360</span> ) </span><br><span class="line">        x = x - <span class="number">360</span> -jiange/<span class="number">2.0</span>;</span><br><span class="line">        y = y + jiange/<span class="number">2.0</span>*<span class="built_in">sqrt</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">ret2 = [];</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> : <span class="number">48</span></span><br><span class="line">    <span class="keyword">if</span> ret(<span class="built_in">i</span>,<span class="number">2</span>) &lt; <span class="number">3</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">mod</span>(<span class="built_in">i</span>, <span class="number">3</span>) ~= <span class="number">0</span></span><br><span class="line">            ret2 = [ret2;ret(<span class="built_in">i</span>,:)];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> ret(<span class="built_in">i</span>,<span class="number">2</span>) &lt; <span class="number">39</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">mod</span>(<span class="built_in">i</span>, <span class="number">3</span>) ~= <span class="number">1</span></span><br><span class="line">            ret2 = [ret2;ret(<span class="built_in">i</span>,:)];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> ret(<span class="built_in">i</span>,<span class="number">2</span>) &lt; <span class="number">60</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">mod</span>(<span class="built_in">i</span>, <span class="number">3</span>) ~= <span class="number">0</span></span><br><span class="line">            ret2 = [ret2;ret(<span class="built_in">i</span>,:)];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">mod</span>(<span class="built_in">i</span>, <span class="number">3</span>) ~= <span class="number">1</span></span><br><span class="line">            ret2 = [ret2;ret(<span class="built_in">i</span>,:)];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>81个点  17.6717</p>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230224232242545.png" alt="image-20230224232242545"></p>
<p>随机点</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">tic</span><br><span class="line">ret = [];</span><br><span class="line">sum = <span class="number">0</span>;</span><br><span class="line">len = <span class="number">100000</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> : len</span><br><span class="line">    x = <span class="number">360.</span>*<span class="built_in">rand</span>(<span class="number">48</span>, <span class="number">1</span>);</span><br><span class="line">    y = <span class="number">90.</span>*<span class="built_in">rand</span>(<span class="number">48</span>, <span class="number">1</span>);</span><br><span class="line">    sum = sum + Copy_3_of_totalH([x,y]);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">av = sum / len</span><br><span class="line">toc</span><br></pre></td></tr></table></figure>
<p>随机加扰动</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">tic</span><br><span class="line"><span class="comment">% ret = [];</span></span><br><span class="line">sum = <span class="number">0</span>;</span><br><span class="line">len = <span class="number">100000</span>;</span><br><span class="line">len1 = <span class="number">48</span>;</span><br><span class="line">minv = <span class="number">60</span>;</span><br><span class="line">maxv = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> : len</span><br><span class="line">    ret1 = ret;</span><br><span class="line">    ret1 = ret1 + <span class="number">5</span>*<span class="built_in">rand</span>(len1,<span class="number">2</span>)<span class="number">-2.5</span>;</span><br><span class="line">    tmp = Copy_3_of_totalH(ret1);</span><br><span class="line">    minv = <span class="built_in">min</span>(minv, tmp);</span><br><span class="line">    maxv = <span class="built_in">max</span>(maxv, tmp);</span><br><span class="line">    sum = sum + tmp;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">av = sum / len</span><br><span class="line">toc</span><br></pre></td></tr></table></figure>
<p>随机加点</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">tic</span><br><span class="line">jiange = <span class="number">22.5</span>;</span><br><span class="line">ret = [];</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt;= <span class="number">90</span></span><br><span class="line">    ret = [ret; x, y];</span><br><span class="line"> </span><br><span class="line">    y = y + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( y &gt; <span class="number">90</span> ) </span><br><span class="line">        y = <span class="number">0</span>;</span><br><span class="line">        x = x + jiange;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">sum = <span class="number">0</span>;</span><br><span class="line">len = <span class="number">100000</span>;</span><br><span class="line">minv = <span class="number">60</span>;</span><br><span class="line">maxv = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> : len</span><br><span class="line">    ret1 = ret;</span><br><span class="line">    x = <span class="number">360</span> * <span class="built_in">rand</span>;</span><br><span class="line">    y = <span class="number">90</span> * <span class="built_in">rand</span>;</span><br><span class="line">    ret1 = [ret1;x,y];</span><br><span class="line">    tmp = Copy_3_of_totalH(ret1);</span><br><span class="line">    minv = <span class="built_in">min</span>(minv, tmp);</span><br><span class="line">    maxv = <span class="built_in">max</span>(maxv, tmp);</span><br><span class="line">    sum = sum + tmp;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">av = sum / len</span><br><span class="line">toc</span><br></pre></td></tr></table></figure>
<hr>
<p>画图 随机扰动</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>([<span class="number">48</span>,<span class="number">80</span>,<span class="number">120</span>],[<span class="number">13.7714</span>,<span class="number">13.7110</span>,<span class="number">13.6724</span>],<span class="string">&#x27;-ksquare&#x27;</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>([<span class="number">48</span>,<span class="number">80</span>,<span class="number">120</span>],[<span class="number">13.7436</span>,<span class="number">13.6732</span>,<span class="number">13.6244</span>],<span class="string">&#x27;-o&#x27;</span>,<span class="string">&#x27;Color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>])</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>([<span class="number">48</span>,<span class="number">80</span>,<span class="number">120</span>],[<span class="number">13.6305</span>,<span class="number">13.5185</span>,<span class="number">13.4272</span>],<span class="string">&#x27;-^&#x27;</span>,<span class="string">&#x27;Color&#x27;</span>,[<span class="number">0.5</span> <span class="number">0</span> <span class="number">0.8</span>])</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="comment">%%</span></span><br><span class="line">xlim([<span class="number">43</span>, <span class="number">125</span>])</span><br><span class="line">line([<span class="number">48</span><span class="number">-1.000</span>,<span class="number">48</span>+<span class="number">1.000</span>],[<span class="number">13.7311</span>,<span class="number">13.7311</span>],<span class="string">&#x27;Color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">48</span><span class="number">-1.000</span>,<span class="number">48</span>+<span class="number">1.000</span>],[<span class="number">13.7549</span>,<span class="number">13.7549</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">48</span>,<span class="number">48</span>],[<span class="number">13.7311</span>,<span class="number">13.7549</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">line([<span class="number">80</span><span class="number">-1.000</span>,<span class="number">80</span>+<span class="number">1.000</span>],[<span class="number">13.6591</span>,<span class="number">13.6591</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">80</span><span class="number">-1.000</span>,<span class="number">80</span>+<span class="number">1.000</span>],[<span class="number">13.6844</span>,<span class="number">13.6844</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">80</span>,<span class="number">80</span>],[<span class="number">13.6844</span>,<span class="number">13.6591</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">line([<span class="number">120</span><span class="number">-1.000</span>,<span class="number">120</span>+<span class="number">1.000</span>],[<span class="number">13.6115</span>,<span class="number">13.6115</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">120</span><span class="number">-1.000</span>,<span class="number">120</span>+<span class="number">1.000</span>],[<span class="number">13.6364</span>,<span class="number">13.6364</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">120</span>,<span class="number">120</span>],[<span class="number">13.6115</span>,<span class="number">13.6364</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">%%</span></span><br><span class="line">line([<span class="number">48</span><span class="number">-1.000</span>,<span class="number">48</span>+<span class="number">1.000</span>],[<span class="number">13.5590</span>,<span class="number">13.5590</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.5</span> <span class="number">0</span> <span class="number">0.8</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">48</span><span class="number">-1.000</span>,<span class="number">48</span>+<span class="number">1.000</span>],[<span class="number">13.6914</span>,<span class="number">13.6914</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.5</span> <span class="number">0</span> <span class="number">0.8</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">48</span>,<span class="number">48</span>],[<span class="number">13.6914</span>,<span class="number">13.5590</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.5</span> <span class="number">0</span> <span class="number">0.8</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">line([<span class="number">80</span><span class="number">-1.000</span>,<span class="number">80</span>+<span class="number">1.000</span>],[<span class="number">13.4549</span>,<span class="number">13.4549</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.5</span> <span class="number">0</span> <span class="number">0.8</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">80</span><span class="number">-1.000</span>,<span class="number">80</span>+<span class="number">1.000</span>],[<span class="number">13.5855</span>,<span class="number">13.5855</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.5</span> <span class="number">0</span> <span class="number">0.8</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">80</span>,<span class="number">80</span>],[<span class="number">13.5855</span>,<span class="number">13.4549</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.5</span> <span class="number">0</span> <span class="number">0.8</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">line([<span class="number">120</span><span class="number">-1.000</span>,<span class="number">120</span>+<span class="number">1.000</span>],[<span class="number">13.3566</span>,<span class="number">13.3566</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.5</span> <span class="number">0</span> <span class="number">0.8</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">120</span><span class="number">-1.000</span>,<span class="number">120</span>+<span class="number">1.000</span>],[<span class="number">13.4927</span>,<span class="number">13.4927</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.5</span> <span class="number">0</span> <span class="number">0.8</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">120</span>,<span class="number">120</span>],[<span class="number">13.3566</span>,<span class="number">13.4927</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.5</span> <span class="number">0</span> <span class="number">0.8</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">box on;</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;正方形网格点分布&#x27;</span>,<span class="string">&#x27;网格点附近扰动±1°&#x27;</span>,<span class="string">&#x27;网格点附近扰动±5°&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;n&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;KL熵&#x27;</span>);</span><br><span class="line">xticks([<span class="number">48</span> <span class="number">80</span> <span class="number">120</span>]);</span><br></pre></td></tr></table></figure>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/clip_image002.jpg" alt="img"></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>([<span class="number">48</span>,<span class="number">80</span>,<span class="number">120</span>],[<span class="number">13.7714</span>,<span class="number">13.7110</span>,<span class="number">13.6724</span>],<span class="string">&#x27;-ksquare&#x27;</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>([<span class="number">48</span>,<span class="number">80</span>,<span class="number">120</span>],[<span class="number">13.7501</span>,<span class="number">13.6984</span>,<span class="number">13.6639</span>],<span class="string">&#x27;-o&#x27;</span>,<span class="string">&#x27;Color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>])</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>([<span class="number">48</span>,<span class="number">80</span>,<span class="number">120</span>],[<span class="number">13.6847</span>,<span class="number">13.6586</span>,<span class="number">13.6372</span>],<span class="string">&#x27;-^&#x27;</span>,<span class="string">&#x27;Color&#x27;</span>,[<span class="number">0.5</span> <span class="number">0</span> <span class="number">0.8</span>])</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="comment">%%</span></span><br><span class="line">xlim([<span class="number">43</span>, <span class="number">125</span>])</span><br><span class="line">line([<span class="number">48</span><span class="number">-1.000</span>,<span class="number">48</span>+<span class="number">1.000</span>],[<span class="number">13.1914</span>,<span class="number">13.1914</span>],<span class="string">&#x27;Color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">48</span><span class="number">-1.000</span>,<span class="number">48</span>+<span class="number">1.000</span>],[<span class="number">13.7214</span>,<span class="number">13.7214</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">48</span>,<span class="number">48</span>],[<span class="number">13.1914</span>,<span class="number">13.7214</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">line([<span class="number">80</span><span class="number">-1.000</span>,<span class="number">80</span>+<span class="number">1.000</span>],[<span class="number">13.3497</span>,<span class="number">13.3497</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">80</span><span class="number">-1.000</span>,<span class="number">80</span>+<span class="number">1.000</span>],[<span class="number">13.6806</span>,<span class="number">13.6806</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">80</span>,<span class="number">80</span>],[<span class="number">13.3497</span>,<span class="number">13.6806</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">line([<span class="number">120</span><span class="number">-1.000</span>,<span class="number">120</span>+<span class="number">1.000</span>],[<span class="number">13.4646</span>,<span class="number">13.4646</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">120</span><span class="number">-1.000</span>,<span class="number">120</span>+<span class="number">1.000</span>],[<span class="number">13.6520</span>,<span class="number">13.6520</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">120</span>,<span class="number">120</span>],[<span class="number">13.4646</span>,<span class="number">13.6520</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0</span> <span class="number">0.6</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">%%</span></span><br><span class="line"></span><br><span class="line">box on;</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;正方形网格点分布&#x27;</span>,<span class="string">&#x27;网格点附近扰动±1°&#x27;</span>,<span class="string">&#x27;网格点附近扰动±5°&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;n&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;KL熵&#x27;</span>);</span><br><span class="line">xticks([<span class="number">48</span> <span class="number">80</span> <span class="number">120</span>]);</span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>([<span class="number">48</span>,<span class="number">80</span>,<span class="number">120</span>],[<span class="number">13.7714</span>,<span class="number">13.7110</span>,<span class="number">13.6724</span>],<span class="string">&#x27;-ksquare&#x27;</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>([<span class="number">48</span>,<span class="number">80</span>,<span class="number">120</span>],[<span class="number">13.6630</span>,<span class="number">13.6456</span>,<span class="number">13.6286</span>],<span class="string">&#x27;-v&#x27;</span>,<span class="string">&#x27;Color&#x27;</span>,[<span class="number">0.6</span> <span class="number">0.1</span> <span class="number">0.1</span>])</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"></span><br><span class="line"><span class="comment">%%</span></span><br><span class="line">line([<span class="number">48</span><span class="number">-1.000</span>,<span class="number">48</span>+<span class="number">1.000</span>],[<span class="number">13.1646</span>,<span class="number">13.1646</span>],<span class="string">&#x27;Color&#x27;</span>,[<span class="number">0.6</span> <span class="number">0.1</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">48</span><span class="number">-1.000</span>,<span class="number">48</span>+<span class="number">1.000</span>],[<span class="number">13.7697</span>,<span class="number">13.7697</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.6</span> <span class="number">0.1</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">48</span>,<span class="number">48</span>],[<span class="number">13.1646</span>,<span class="number">13.7697</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.6</span> <span class="number">0.1</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">line([<span class="number">80</span><span class="number">-1.000</span>,<span class="number">80</span>+<span class="number">1.000</span>],[<span class="number">13.3706</span>,<span class="number">13.3706</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.6</span> <span class="number">0.1</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">80</span><span class="number">-1.000</span>,<span class="number">80</span>+<span class="number">1.000</span>],[<span class="number">13.7095</span>,<span class="number">13.7095</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.6</span> <span class="number">0.1</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">80</span>,<span class="number">80</span>],[<span class="number">13.3706</span>,<span class="number">13.7095</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.6</span> <span class="number">0.1</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">line([<span class="number">120</span><span class="number">-1.000</span>,<span class="number">120</span>+<span class="number">1.000</span>],[<span class="number">13.4553</span>,<span class="number">13.4553</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.6</span> <span class="number">0.1</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">120</span><span class="number">-1.000</span>,<span class="number">120</span>+<span class="number">1.000</span>],[<span class="number">13.6715</span>,<span class="number">13.6715</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.6</span> <span class="number">0.1</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">line([<span class="number">120</span>,<span class="number">120</span>],[<span class="number">13.4553</span>,<span class="number">13.6715</span>],<span class="string">&#x27;color&#x27;</span>,[<span class="number">0.6</span> <span class="number">0.1</span> <span class="number">0.1</span>],<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">box on;</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;正方形网格点分布&#x27;</span>,<span class="string">&#x27;随机替换一个点&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;n&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;KL熵&#x27;</span>);</span><br><span class="line">xticks([<span class="number">48</span> <span class="number">80</span> <span class="number">120</span>]);</span><br></pre></td></tr></table></figure>
<p>随机替换一个点</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">clear all;  close all;clc;tic;</span><br><span class="line">jiange = <span class="number">22.5</span>;</span><br><span class="line">ret = [];</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt;= <span class="number">90</span></span><br><span class="line">    ret = [ret; x, y];</span><br><span class="line"> </span><br><span class="line">    y = y + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( y &gt; <span class="number">90</span> ) </span><br><span class="line">        y = <span class="number">0</span>;</span><br><span class="line">        x = x + jiange;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">ret(<span class="keyword">end</span>,:)=[];</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">sum = <span class="number">0</span>;</span><br><span class="line">len = <span class="number">100000</span>;</span><br><span class="line">minv = <span class="number">60</span>;</span><br><span class="line">maxv = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> : len</span><br><span class="line">    ret1 = ret;</span><br><span class="line">    x = <span class="number">360</span> * <span class="built_in">rand</span>;</span><br><span class="line">    y = <span class="number">90</span> * <span class="built_in">rand</span>;</span><br><span class="line">    ret1 = [ret1;x,y];</span><br><span class="line">    tmp = Copy_3_of_totalH(ret1);</span><br><span class="line">    minv = <span class="built_in">min</span>(minv, tmp);</span><br><span class="line">    <span class="keyword">if</span> ( tmp &gt; maxv ) </span><br><span class="line">    	maxv = tmp;</span><br><span class="line">    	x</span><br><span class="line">    	y</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    sum = sum + tmp;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">av = sum / len</span><br><span class="line">toc</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>我本章的实验基于的是同n值的，因为n值大，KL熵小 ，不同n值不能说明均匀性。</p>
<hr>
<p>正三角形网格点旋转</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">clear all;  close all;clc;</span><br><span class="line">jiange = <span class="number">22.5</span>;</span><br><span class="line">rec = [];</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt;= <span class="number">90</span></span><br><span class="line">	<span class="keyword">if</span> x &gt;= <span class="number">0</span></span><br><span class="line">	    rec = [rec; x, y];</span><br><span class="line"> 	<span class="keyword">end</span></span><br><span class="line">    x = x + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( x &gt;= <span class="number">360</span> ) </span><br><span class="line">        x = x - <span class="number">360</span> -jiange/<span class="number">2.0</span>;</span><br><span class="line">        y = y + jiange/<span class="number">2.0</span>*<span class="built_in">sqrt</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">d = <span class="number">15</span>;</span><br><span class="line">rec1(:,<span class="number">1</span>) = rec(:,<span class="number">1</span>)*<span class="built_in">cosd</span>(d) - rec(:,<span class="number">2</span>)*<span class="built_in">sind</span>(d);</span><br><span class="line">rec1(:,<span class="number">2</span>) = rec(:,<span class="number">1</span>)*<span class="built_in">sind</span>(d) + rec(:,<span class="number">2</span>)*<span class="built_in">cosd</span>(d);</span><br><span class="line"></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">axis equal;</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">60</span> <span class="number">120</span> <span class="number">180</span> <span class="number">240</span> <span class="number">300</span> <span class="number">360</span>])</span><br><span class="line">yticks([<span class="number">0</span> <span class="number">30</span> <span class="number">60</span> <span class="number">90</span>])</span><br><span class="line">xlim([<span class="number">-30</span> <span class="number">400</span>]);</span><br><span class="line">ylim([<span class="number">-30</span> <span class="number">140</span>]);</span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">xt=get(gca,<span class="string">&#x27;xtick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(xt);</span><br><span class="line">	xt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,xt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;xticklabel&#x27;</span>,xt1);</span><br><span class="line">yt=get(gca,<span class="string">&#x27;ytick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(yt);</span><br><span class="line">	yt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,yt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;yticklabel&#x27;</span>,yt1);</span><br><span class="line">xlabel(<span class="string">&#x27;方位轴&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;高度轴&#x27;</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">90</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">0</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">360</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">scatter</span>(rec1(:,<span class="number">1</span>), rec1(:,<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">jiange = <span class="number">22.5</span>;</span><br><span class="line">rec2 = [];</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = -jiange *<span class="built_in">sqrt</span>(<span class="number">3</span>) ;</span><br><span class="line"><span class="keyword">while</span> x &lt;= <span class="number">360</span>+jiange &amp;&amp; y &lt;= <span class="number">90</span></span><br><span class="line">	<span class="keyword">if</span> x &gt;= <span class="number">0</span></span><br><span class="line">	    rec2 = [rec2; x, y];</span><br><span class="line"> 	<span class="keyword">end</span></span><br><span class="line">    x = x + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( x &gt;= <span class="number">360</span>+jiange ) </span><br><span class="line">        x = x<span class="number">-360</span> -jiange/<span class="number">2.0</span> - jiange;</span><br><span class="line">        y = y + jiange/<span class="number">2.0</span>*<span class="built_in">sqrt</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">d = <span class="number">15</span>;</span><br><span class="line">rec3(:,<span class="number">1</span>) = rec2(:,<span class="number">1</span>)*<span class="built_in">cosd</span>(d) - rec2(:,<span class="number">2</span>)*<span class="built_in">sind</span>(d);</span><br><span class="line">rec3(:,<span class="number">2</span>) = rec2(:,<span class="number">1</span>)*<span class="built_in">sind</span>(d) + rec2(:,<span class="number">2</span>)*<span class="built_in">cosd</span>(d);  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">axis equal;</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">60</span> <span class="number">120</span> <span class="number">180</span> <span class="number">240</span> <span class="number">300</span> <span class="number">360</span>])</span><br><span class="line">yticks([<span class="number">0</span> <span class="number">30</span> <span class="number">60</span> <span class="number">90</span>])</span><br><span class="line">xlim([<span class="number">-30</span> <span class="number">400</span>]);</span><br><span class="line">ylim([<span class="number">-30</span> <span class="number">140</span>]);</span><br><span class="line"><span class="comment">% grid on;</span></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line">xt=get(gca,<span class="string">&#x27;xtick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(xt);</span><br><span class="line">	xt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,xt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;xticklabel&#x27;</span>,xt1);</span><br><span class="line">yt=get(gca,<span class="string">&#x27;ytick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(yt);</span><br><span class="line">	yt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,yt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;yticklabel&#x27;</span>,yt1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">xlabel(<span class="string">&#x27;方位轴&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;高度轴&#x27;</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">90</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">0</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">360</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter</span>(rec3(:,<span class="number">1</span>), rec3(:,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230228142912992.png" alt="image-20230228142912992"></p>
<hr>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">clear all;  close all;clc;</span><br><span class="line">jiange = <span class="number">22.5</span>;</span><br><span class="line">ret = [];</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt;= <span class="number">90</span></span><br><span class="line">	<span class="keyword">if</span> x &gt;= <span class="number">0</span></span><br><span class="line">	    ret = [ret; x, y];</span><br><span class="line"> 	<span class="keyword">end</span></span><br><span class="line">    x = x + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( x &gt;= <span class="number">360</span> ) </span><br><span class="line">        x = x - <span class="number">360</span> -jiange/<span class="number">2.0</span>;</span><br><span class="line">        y = y + jiange/<span class="number">2.0</span>*<span class="built_in">sqrt</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">clf;</span><br><span class="line"><span class="comment">% box on;</span></span><br><span class="line">axis equal;</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">60</span> <span class="number">120</span> <span class="number">180</span> <span class="number">240</span> <span class="number">300</span> <span class="number">360</span>])</span><br><span class="line">yticks([<span class="number">0</span> <span class="number">30</span> <span class="number">60</span> <span class="number">90</span>])</span><br><span class="line">xlim([<span class="number">-10</span> <span class="number">370</span>]);</span><br><span class="line">ylim([<span class="number">-10</span> <span class="number">100</span>]);</span><br><span class="line"><span class="comment">% grid on;</span></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line">xt=get(gca,<span class="string">&#x27;xtick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(xt);</span><br><span class="line">	xt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,xt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;xticklabel&#x27;</span>,xt1);</span><br><span class="line">yt=get(gca,<span class="string">&#x27;ytick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(yt);</span><br><span class="line">	yt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,yt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;yticklabel&#x27;</span>,yt1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">xlabel(<span class="string">&#x27;方位轴&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;高度轴&#x27;</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">90</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">0</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">360</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter</span>(ret(:,<span class="number">1</span>), ret(:,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>选取点建KD树， 对600个星点找最近邻 ，算出每个星的权值，再遍历一遍每个星，为每个星的空间不断替换最优值。遍历一遍也行</p>
<p>从哪个点找哪个点更快</p>
<hr>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">clear all;  close all;clc;</span><br><span class="line">tic;</span><br><span class="line">M = csvread(<span class="string">&#x27;J2000_5_hor.csv&#x27;</span>);</span><br><span class="line">points = M(:, <span class="number">2</span>:<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">jiange = <span class="number">360.0</span>/<span class="number">9</span>;</span><br><span class="line">ret = [];</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt;= <span class="number">90</span></span><br><span class="line">	<span class="keyword">if</span> x &gt;= <span class="number">-0.001</span></span><br><span class="line">	    ret = [ret; x, y];</span><br><span class="line"> 	<span class="keyword">end</span></span><br><span class="line">    x = x + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( x &gt;= <span class="number">359</span> ) </span><br><span class="line">        x = x - <span class="number">360</span> -jiange/<span class="number">2.0</span>;</span><br><span class="line">        y = y + jiange/<span class="number">2.0</span>*<span class="built_in">sqrt</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">n = <span class="built_in">length</span>(ret);</span><br><span class="line">tmp = <span class="built_in">ones</span>(n,<span class="number">1</span>)*<span class="number">360</span>;</span><br><span class="line">rev = <span class="built_in">ones</span>(n,<span class="number">2</span>)*<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">Mdl = KDTreeSearcher(ret);</span><br><span class="line">kk = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> : <span class="built_in">length</span>(points)</span><br><span class="line">    [nn,d] = knnsearch(Mdl,points(<span class="built_in">i</span>,<span class="number">1</span>:<span class="number">2</span>),<span class="string">&#x27;k&#x27;</span>,kk+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> d &lt; tmp(nn)</span><br><span class="line">        tmp(nn) = d;</span><br><span class="line">        rev(nn,:) = points(<span class="built_in">i</span>,<span class="number">1</span>:<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">clf;</span><br><span class="line"><span class="comment">% box on;</span></span><br><span class="line">axis equal;</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">60</span> <span class="number">120</span> <span class="number">180</span> <span class="number">240</span> <span class="number">300</span> <span class="number">360</span>])</span><br><span class="line">yticks([<span class="number">0</span> <span class="number">30</span> <span class="number">60</span> <span class="number">90</span>])</span><br><span class="line">xlim([<span class="number">-10</span> <span class="number">370</span>]);</span><br><span class="line">ylim([<span class="number">-10</span> <span class="number">100</span>]);</span><br><span class="line"><span class="comment">% grid on;</span></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line">xt=get(gca,<span class="string">&#x27;xtick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(xt);</span><br><span class="line">	xt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,xt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;xticklabel&#x27;</span>,xt1);</span><br><span class="line">yt=get(gca,<span class="string">&#x27;ytick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(yt);</span><br><span class="line">	yt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,yt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;yticklabel&#x27;</span>,yt1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">xlabel(<span class="string">&#x27;方位轴&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;高度轴&#x27;</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">90</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">0</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">360</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter</span>(ret(:,<span class="number">1</span>), ret(:,<span class="number">2</span>))</span><br><span class="line"><span class="built_in">scatter</span>(points(:,<span class="number">1</span>), points(:,<span class="number">2</span>),<span class="number">5</span>)</span><br><span class="line"><span class="built_in">scatter</span>(rev(:,<span class="number">1</span>), rev(:,<span class="number">2</span>),<span class="number">50</span>,<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">toc;	</span><br></pre></td></tr></table></figure>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230302142722831.png" alt="image-20230302142722831"></p>
<p>纯距离  </p>
<p>共27个</p>
<p>随机KL熵 11.7958</p>
<p>距离最近加权 13.4318   历时 0.078488 秒。</p>
<p>星等加权 随机 13.4006      ，总权值 -247.0324</p>
<p>优化后  13.5629  总权值 -195  最好的位移是 32.5583  6.7  历时25s</p>
<p>粒子50 迭代30  13.5537  -190.6025  位移30 7  30.2979600360942    7.02950188386670  25s</p>
<p>粒子15迭代10  13.5537  -190.6025  位移30.1858 6.9537   历时 2.705201 秒。</p>
<p>-196.325020765185    -196.325020765185    -196.325020765185    -196.325020765185    -191.733361560326    -190.655450867045    -190.655450867045    -190.655450867045    -190.655450867045    -190.655450867045</p>
<p>   暴力点 13.5557   -190.6024   30.299  7.036   300粒子500迭代  历时 2638.095214 秒。</p>
<p>模拟退火最大化 13.6253   历时 74.406457 秒。</p>
<p>模拟点 13.7632</p>
<hr>
<p>权值 = -距离 + -星等  ，星等越亮，越小，-星等越大，距离越近，越好，-距离越大，越好 权值越大</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">Mdl = KDTreeSearcher(ret);</span><br><span class="line">kk = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> : <span class="built_in">length</span>(points)</span><br><span class="line">    [nn,d] = knnsearch(Mdl,points(<span class="built_in">i</span>,<span class="number">1</span>:<span class="number">2</span>),<span class="string">&#x27;k&#x27;</span>,kk+<span class="number">1</span>);</span><br><span class="line">    value = -d - points(<span class="built_in">i</span>,<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">if</span> value &gt; tmp(nn)</span><br><span class="line">        tmp(nn) = value;</span><br><span class="line">        rev(nn,:) = points(<span class="built_in">i</span>,<span class="number">1</span>:<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">toc;</span><br><span class="line">Copy_3_of_totalH(rev)</span><br></pre></td></tr></table></figure>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230302144029305.png" alt="image-20230302144029305"></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">clear all;  close all;clc;</span><br><span class="line">tic;</span><br><span class="line">M = csvread(<span class="string">&#x27;J2000_5_hor.csv&#x27;</span>);</span><br><span class="line">points = M(:, <span class="number">2</span>:<span class="number">4</span>);</span><br><span class="line">jiange = <span class="number">360.0</span>/<span class="number">10</span>;</span><br><span class="line">ret = [];</span><br><span class="line">x = <span class="number">0</span>;</span><br><span class="line">y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> x &lt; <span class="number">360</span> &amp;&amp; y &lt;= <span class="number">90</span></span><br><span class="line">	<span class="keyword">if</span> x &gt;= <span class="number">-0.0000001</span></span><br><span class="line">	    ret = [ret; x, y];</span><br><span class="line"> 	<span class="keyword">end</span></span><br><span class="line">    x = x + jiange;</span><br><span class="line">    <span class="keyword">if</span> ( x &gt;= <span class="number">359.9999999</span> ) </span><br><span class="line">        x = x - <span class="number">360</span> -jiange/<span class="number">2.0</span>;</span><br><span class="line">        y = y + jiange/<span class="number">2.0</span>*<span class="built_in">sqrt</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">N = <span class="number">50</span>;                           <span class="comment">% 初始种群个数</span></span><br><span class="line">d = <span class="number">2</span>;                             <span class="comment">% 空间维数（参看上述的函数表达式）</span></span><br><span class="line">ger = <span class="number">30</span>;                         <span class="comment">% 最大迭代次数     </span></span><br><span class="line">plimit = [<span class="number">0</span>,jiange;<span class="number">0</span>,<span class="number">90</span>-ret(<span class="keyword">end</span>)];              <span class="comment">% 设置位置参数限制(矩阵的形式可以多维)，现在2X2矩阵</span></span><br><span class="line">vlimit = [<span class="number">-1.5</span>, <span class="number">1.5</span>;<span class="number">-1.5</span>, <span class="number">1.5</span>];    <span class="comment">% 设置速度限制</span></span><br><span class="line">w = <span class="number">0.8</span>;                           <span class="comment">% 惯性权重,个体历史成绩对现在的影响0.5~1之间</span></span><br><span class="line">c1 = <span class="number">0.5</span>;                          <span class="comment">% 自我学习因子</span></span><br><span class="line">c2 = <span class="number">0.5</span>;                          <span class="comment">% 群体学习因子 </span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:d</span><br><span class="line">    xx(:,<span class="built_in">i</span>) = plimit(<span class="built_in">i</span>, <span class="number">1</span>) + (plimit(<span class="built_in">i</span>, <span class="number">2</span>) - plimit(<span class="built_in">i</span>, <span class="number">1</span>)) * <span class="built_in">rand</span>(N, <span class="number">1</span>);<span class="comment">%初始种群的位置</span></span><br><span class="line"><span class="keyword">end</span>                              <span class="comment">%rand(N,1)产生N行一列范围在1之内的随机数</span></span><br><span class="line">                              <span class="comment">%第一列,第二列：x=0+（20-0）*（1之内的随机数）                                    </span></span><br><span class="line">v = <span class="built_in">rand</span>(N, d);                   <span class="comment">% 初始种群的速度,500行2列分别在两个维度上</span></span><br><span class="line">xm = xx;                           <span class="comment">% 每个个体的历史最佳位置</span></span><br><span class="line">ym = <span class="built_in">zeros</span>(<span class="number">1</span>, d);                 <span class="comment">% 种群的历史最佳位置，两个维度，设置为0</span></span><br><span class="line">fxm = <span class="built_in">ones</span>(N, <span class="number">1</span>) * (-<span class="built_in">inf</span>);                <span class="comment">% 每个个体的历史最佳适应度，设置为0</span></span><br><span class="line">fym = -<span class="built_in">inf</span>;                       <span class="comment">% 种群历史最佳适应度,求最大值先设置成负无穷</span></span><br><span class="line">kk = <span class="number">0</span>;</span><br><span class="line">iter = <span class="number">1</span>;  </span><br><span class="line">n = <span class="built_in">length</span>(ret);</span><br><span class="line">tmp = <span class="built_in">ones</span>(n,<span class="number">1</span>)*(<span class="number">-500</span>);</span><br><span class="line">rev = <span class="built_in">ones</span>(n,<span class="number">2</span>)*(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">fx = <span class="built_in">ones</span>(n,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> iter &lt;= ger</span><br><span class="line"></span><br><span class="line"><span class="comment">%     fx = f(xx(:,1),xx(:,2));         % 代入x中的二维数据，算出个体当前适应度,为500行1列的数据   </span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:N                   <span class="comment">%对每一个个体做判断</span></span><br><span class="line">        ret1 = ret + xx(<span class="built_in">i</span>,:);</span><br><span class="line">        ret1(ret1(:,<span class="number">1</span>) &gt; <span class="number">360</span>) = ret1(ret1(:,<span class="number">1</span>) &gt; <span class="number">360</span>) - <span class="number">360</span>;</span><br><span class="line">        </span><br><span class="line">        Mdl = KDTreeSearcher(ret1);</span><br><span class="line">        tmp = <span class="built_in">ones</span>(n,<span class="number">1</span>)*(<span class="number">-500</span>);</span><br><span class="line">        rev = <span class="built_in">ones</span>(n,<span class="number">2</span>)*(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> ii = <span class="number">1</span> : <span class="built_in">length</span>(points)</span><br><span class="line">          </span><br><span class="line">            [nn,ddd] = knnsearch(Mdl,points(ii,<span class="number">1</span>:<span class="number">2</span>),<span class="string">&#x27;k&#x27;</span>,kk+<span class="number">1</span>);</span><br><span class="line">            value = -ddd - points(ii,<span class="number">3</span>);</span><br><span class="line">            <span class="keyword">if</span> value &gt; tmp(nn)</span><br><span class="line">                tmp(nn) = value;</span><br><span class="line">                rev(nn,:) = points(ii,<span class="number">1</span>:<span class="number">2</span>);</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        fx(<span class="built_in">i</span>) = sum(tmp);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> fxm(<span class="built_in">i</span>) &lt; fx(<span class="built_in">i</span>)           <span class="comment">%如果每个个体的历史最佳适应度小于个体当前适应度</span></span><br><span class="line">            fxm(<span class="built_in">i</span>) = fx(<span class="built_in">i</span>);         <span class="comment">% 更新个体历史最佳适应度,第一轮就是把小于零的清除</span></span><br><span class="line">            xm(<span class="built_in">i</span>,:) = xx(<span class="built_in">i</span>,:);       <span class="comment">% 更新个体历史最佳位置</span></span><br><span class="line">        <span class="keyword">end</span> </span><br><span class="line">     <span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> fym &lt; <span class="built_in">max</span>(fxm)                  <span class="comment">%种群历史最佳适应度小于个体里面最佳适应度的最大值</span></span><br><span class="line">            [fym, nmax] = <span class="built_in">max</span>(fxm);    <span class="comment">% 更新群体历史最佳适应度,取出最大适应度的值和所在行数即位置</span></span><br><span class="line">            ym = xm(nmax, :);          <span class="comment">% 更新群体历史最佳位置</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">     v = v * w + c1 * <span class="built_in">rand</span> *(xm - xx) + c2 * <span class="built_in">rand</span> *(<span class="built_in">repmat</span>(ym, N, <span class="number">1</span>) - xx); <span class="comment">% 速度更新公式,repmat函数把ym矩阵扩充成N行1列</span></span><br><span class="line">    </span><br><span class="line">     <span class="comment">%%边界速度处理</span></span><br><span class="line">     <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:d </span><br><span class="line">            <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:N</span><br><span class="line">            <span class="keyword">if</span>  v(<span class="built_in">j</span>,<span class="built_in">i</span>)&gt;vlimit(<span class="built_in">i</span>,<span class="number">2</span>);      <span class="comment">%如果速度大于边界速度，则把速度拉回边界</span></span><br><span class="line">                v(<span class="built_in">j</span>,<span class="built_in">i</span>)=vlimit(<span class="built_in">i</span>,<span class="number">2</span>);</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">if</span>  v(<span class="built_in">j</span>,<span class="built_in">i</span>) &lt; vlimit(<span class="built_in">i</span>,<span class="number">1</span>)     <span class="comment">%如果速度小于边界速度，则把速度拉回边界</span></span><br><span class="line">                v(<span class="built_in">j</span>,<span class="built_in">i</span>)=vlimit(<span class="built_in">i</span>,<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">     <span class="keyword">end</span>      </span><br><span class="line">       </span><br><span class="line">     xx = xx + v;                          <span class="comment">% 位置更新</span></span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">      <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:d </span><br><span class="line">            <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:N</span><br><span class="line">            <span class="keyword">if</span>  xx(<span class="built_in">j</span>,<span class="built_in">i</span>)&gt;plimit(<span class="built_in">i</span>,<span class="number">2</span>)</span><br><span class="line">                xx(<span class="built_in">j</span>,<span class="built_in">i</span>)=plimit(<span class="built_in">i</span>,<span class="number">2</span>);</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">if</span>  xx(<span class="built_in">j</span>,<span class="built_in">i</span>) &lt; plimit(<span class="built_in">i</span>,<span class="number">1</span>)</span><br><span class="line">                xx(<span class="built_in">j</span>,<span class="built_in">i</span>)=plimit(<span class="built_in">i</span>,<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      </span><br><span class="line">      record(iter) = fym;            <span class="comment">%记录最大值</span></span><br><span class="line">      </span><br><span class="line"><span class="comment">%    if times &gt;= 10</span></span><br><span class="line"><span class="comment">%         cla;                    %清除轴线图形</span></span><br><span class="line"><span class="comment">%         mesh(x0_1, x0_2, y0);</span></span><br><span class="line"><span class="comment">%         plot3(x(:,1),x(:,2),f(x(:,1),x(:,2)), &#x27;ro&#x27;);title(&#x27;状态位置变化&#x27;);</span></span><br><span class="line"><span class="comment">%         pause(0.5);</span></span><br><span class="line"><span class="comment">%        times=0;</span></span><br><span class="line"><span class="comment">%     end</span></span><br><span class="line">    iter = iter+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">toc;</span><br><span class="line"></span><br><span class="line">ret2 = ret + ym;</span><br><span class="line">ret2(ret2(:,<span class="number">1</span>) &gt; <span class="number">360</span>) = ret2(ret2(:,<span class="number">1</span>) &gt; <span class="number">360</span>) - <span class="number">360</span>;</span><br><span class="line">Mdl = KDTreeSearcher(ret2);</span><br><span class="line">tmp = <span class="built_in">ones</span>(n,<span class="number">1</span>)*(<span class="number">-500</span>);</span><br><span class="line">rev = <span class="built_in">ones</span>(n,<span class="number">2</span>)*(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span> ii = <span class="number">1</span> : <span class="built_in">length</span>(points)</span><br><span class="line">    [nn,ddd] = knnsearch(Mdl,points(ii,<span class="number">1</span>:<span class="number">2</span>),<span class="string">&#x27;k&#x27;</span>,kk+<span class="number">1</span>);</span><br><span class="line">    value = -ddd - points(ii,<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">if</span> value &gt; tmp(nn)</span><br><span class="line">        tmp(nn) = value;</span><br><span class="line">        rev(nn,:) = points(ii,<span class="number">1</span>:<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">aaan = sum(tmp);</span><br><span class="line"></span><br><span class="line">Copy_3_of_totalH(rev)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">clf;</span><br><span class="line"></span><br><span class="line">p1 = <span class="built_in">scatter</span>(ret2(:,<span class="number">1</span>), ret2(:,<span class="number">2</span>))</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line">p2 = <span class="built_in">scatter</span>(points(:,<span class="number">1</span>), points(:,<span class="number">2</span>),<span class="number">5</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line">p3 = <span class="built_in">scatter</span>(rev(:,<span class="number">1</span>), rev(:,<span class="number">2</span>),<span class="number">50</span>,<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">% box on;</span></span><br><span class="line">axis equal;</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">60</span> <span class="number">120</span> <span class="number">180</span> <span class="number">240</span> <span class="number">300</span> <span class="number">360</span>])</span><br><span class="line">yticks([<span class="number">0</span> <span class="number">30</span> <span class="number">60</span> <span class="number">90</span>])</span><br><span class="line">xlim([<span class="number">-10</span> <span class="number">370</span>]);</span><br><span class="line">ylim([<span class="number">-10</span> <span class="number">120</span>]);</span><br><span class="line"><span class="comment">% grid on;</span></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line">xt=get(gca,<span class="string">&#x27;xtick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(xt);</span><br><span class="line">	xt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,xt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;xticklabel&#x27;</span>,xt1);</span><br><span class="line">yt=get(gca,<span class="string">&#x27;ytick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(yt);</span><br><span class="line">	yt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,yt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;yticklabel&#x27;</span>,yt1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">xlabel(<span class="string">&#x27;方位轴&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;高度轴&#x27;</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">90</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">0</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">line([<span class="number">360</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">legend</span>([p1, p2,p3],&#123;<span class="string">&#x27;三角形网格点&#x27;</span>,<span class="string">&#x27;上半天区所有点&#x27;</span>,<span class="string">&#x27;距离最近点&#x27;</span>&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230302215728987.png" alt="image-20230302215728987"></p>
<p>距离-星等加权法</p>
<p>基于正三角形网格点的均匀选取方法，寻求变换</p>
<p>基于粒子群算法的最大化总体评价权值</p>
<p>总体评价权值<em>V</em></p>
<p>综合评价权值</p>
<p>贡献度</p>
<hr>
<p>计算实时最远距离</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">dddd = <span class="number">0</span>;</span><br><span class="line">tmp =[];</span><br><span class="line">iii = <span class="number">0</span>;</span><br><span class="line">tic;</span><br><span class="line">Mdl = KDTreeSearcher(rev);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ii = <span class="number">1</span> : <span class="built_in">length</span>(points)</span><br><span class="line">    [nn,ddd] = knnsearch(Mdl, points(ii,<span class="number">1</span>:<span class="number">2</span>),<span class="string">&#x27;k&#x27;</span>,kk+<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">if</span> ( ddd &gt; points(ii,<span class="number">1</span>) )</span><br><span class="line">    	[~, dd] = knnsearch(Mdl,[points(ii,<span class="number">1</span>) + <span class="number">360.0</span>, points(ii, <span class="number">2</span>)],<span class="string">&#x27;k&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    	ddd = <span class="built_in">min</span>(ddd, dd);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  	<span class="keyword">if</span> (ddd &gt; <span class="number">360</span> - points(ii,<span class="number">1</span>) )</span><br><span class="line">    	[~, dd] = knnsearch(Mdl,[points(ii,<span class="number">1</span>) - <span class="number">360.0</span>, points(ii, <span class="number">2</span>)],<span class="string">&#x27;k&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">    	ddd = <span class="built_in">min</span>(ddd, dd);</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> ddd &gt; dddd</span><br><span class="line">        dddd = ddd;</span><br><span class="line">        iii = ii;</span><br><span class="line">        tmp = points(ii,<span class="number">1</span>:<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">toc;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">p4 = <span class="built_in">scatter</span>(tmp(<span class="number">1</span>), tmp(<span class="number">2</span>),<span class="string">&#x27;k&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">legend</span>([p1, p2,p3, p4],&#123;<span class="string">&#x27;三角形网格点&#x27;</span>,<span class="string">&#x27;上半天区所有点&#x27;</span>,<span class="string">&#x27;距离最近点&#x27;</span>,<span class="string">&#x27;增补的一个星&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">pdist([<span class="number">137.3420</span>  , <span class="number">87.7710</span>;<span class="number">117.085</span>,<span class="number">73.8926</span>],<span class="string">&#x27;euclidean&#x27;</span>)</span><br><span class="line">pdist([<span class="number">137.3420</span>  , <span class="number">87.7710</span>;<span class="number">158.055</span>,<span class="number">72.5033</span>],<span class="string">&#x27;euclidean&#x27;</span>)</span><br></pre></td></tr></table></figure>
<hr>
<p>15<em>(cosd(weidu) </em> cosd(A) / tand(90-h) + sind(weidu))</p>
<hr>
<p>重新做一下星图软件</p>
<p>假设五等星 1471个星</p>
<p>纯计算方位角 需要10ms，显示成表格 12ms  显示出星图 229ms （加上地平380ms） 加个判断显示在地平上的 95ms </p>
<p>显示表格+视赤道 14ms  235ms</p>
<p>6等星 纯计算方位角 需要30ms，显示成表格 36ms  显示出星图 </p>
<hr>
<p>方位角误差</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% function  requation()</span></span><br><span class="line"></span><br><span class="line">clc;clear;</span><br><span class="line">load data1.csv</span><br><span class="line"></span><br><span class="line">azimuth=data1(:,<span class="number">1</span>)/<span class="number">180</span>*<span class="built_in">pi</span>; <span class="comment">%#ok&lt;*NODEF&gt;</span></span><br><span class="line">altitude=data1(:,<span class="number">2</span>)/<span class="number">180</span>*<span class="built_in">pi</span>;</span><br><span class="line">deltaA=<span class="number">0</span>-data1(:,<span class="number">3</span>)/<span class="number">3600.0</span>; <span class="comment">% °</span></span><br><span class="line">deltaH=<span class="number">0</span>-data1(:,<span class="number">4</span>)/<span class="number">3600.0</span>; </span><br><span class="line"></span><br><span class="line">X=[<span class="number">0.</span>*altitude+<span class="number">1</span> <span class="number">0.</span>*altitude -<span class="built_in">cos</span>(azimuth).*<span class="built_in">tan</span>(altitude) -<span class="built_in">sin</span>(azimuth).*<span class="built_in">tan</span>(altitude) <span class="built_in">sec</span>(altitude) -<span class="built_in">tan</span>(altitude) <span class="built_in">sin</span>(azimuth) <span class="built_in">cos</span>(azimuth) <span class="number">0.</span>*altitude <span class="built_in">sin</span>(<span class="number">2.</span>*azimuth) <span class="built_in">cos</span>(<span class="number">2.</span>*azimuth) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">sin</span>(<span class="number">2.</span>*azimuth).*<span class="built_in">sec</span>(altitude) <span class="built_in">cos</span>(<span class="number">2.</span>*azimuth).*<span class="built_in">sec</span>(altitude) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude];</span><br><span class="line">y=[<span class="number">0.</span>*altitude <span class="number">0.</span>*altitude+<span class="number">1</span> <span class="built_in">sin</span>(azimuth) -<span class="built_in">cos</span>(azimuth) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">cot</span>(altitude) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">sin</span>(azimuth) <span class="built_in">cos</span>(azimuth) altitude.*<span class="built_in">sin</span>(azimuth) altitude.*<span class="built_in">cos</span>(azimuth) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">sin</span>(<span class="number">2.</span>*azimuth) <span class="built_in">cos</span>(<span class="number">2.</span>*azimuth)];</span><br><span class="line"></span><br><span class="line">A=[X;y];</span><br><span class="line">Y=[deltaA;deltaH]; <span class="comment">% °</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%Res 为方程系数 Y° = A(弧度) * Res -&gt; </span></span><br><span class="line">Res = inv(A&#x27;*A)*A&#x27;*Y;</span><br><span class="line"><span class="comment">%E 为残差</span></span><br><span class="line">E = (A*Res - Y)*<span class="number">3600</span>;</span><br><span class="line"><span class="comment">%MSE 为平均均方误差</span></span><br><span class="line">RMS = <span class="built_in">sqrt</span>(mse(E))</span><br><span class="line"><span class="comment">%输出 到TXT文件 科学计算法</span></span><br><span class="line"><span class="comment">%save ResultXISHU.txt Res -ascii; </span></span><br><span class="line">file1=fopen(<span class="string">&#x27;ResultXISHU.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="built_in">length</span>(Res)</span><br><span class="line">   fprintf(file1,<span class="string">&#x27;%5.5f\r\n&#x27;</span>,Res(<span class="built_in">i</span>));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">EA = E(<span class="number">1</span>:<span class="number">64</span>);</span><br><span class="line">EE = E(<span class="number">65</span>:<span class="keyword">end</span>);</span><br><span class="line">RMSA = <span class="built_in">sqrt</span>(mse(EA));</span><br><span class="line"></span><br><span class="line">RMSE = <span class="built_in">sqrt</span>(mse(EE));</span><br><span class="line"><span class="comment">% aa = </span></span><br><span class="line"></span><br><span class="line">fclose(file1);</span><br><span class="line"><span class="comment">%输出 到TXT文件 科学计算法</span></span><br><span class="line"><span class="comment">%save ResultRMS.txt RMS -ascii; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">% end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> :<span class="number">64</span></span><br><span class="line">    <span class="keyword">if</span> data1(<span class="built_in">i</span>,<span class="number">1</span>) &lt; <span class="number">0</span> </span><br><span class="line">        data1(<span class="built_in">i</span>,<span class="number">1</span>) = data1(<span class="built_in">i</span>,<span class="number">1</span>) + <span class="number">360</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.1</span> <span class="number">0.5</span> <span class="number">0.8</span> <span class="number">0.5</span>]);</span><br><span class="line">title(<span class="string">&#x27;模型校正前的方位角偏差&#x27;</span>)</span><br><span class="line">grid on;</span><br><span class="line">box on; </span><br><span class="line">axis equal;</span><br><span class="line">xlim([<span class="number">0</span> <span class="number">360</span>]);</span><br><span class="line">ylim([<span class="number">-80</span> <span class="number">50</span>]);</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">60</span> <span class="number">120</span> <span class="number">180</span> <span class="number">240</span> <span class="number">300</span> <span class="number">360</span>])</span><br><span class="line"><span class="comment">% yticks([0 30 60 90])</span></span><br><span class="line">xlabel(<span class="string">&#x27;方位轴&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;误差（角秒）&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter</span>(data1(:,<span class="number">1</span>), data1(:,<span class="number">3</span>), <span class="number">28</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% scatter(points(best_way,1), points(best_way,2), 20,&#x27;filled&#x27;,&#x27;MarkerFaceColor&#x27;,&#x27;#FF8000&#x27;)</span></span><br><span class="line"><span class="comment">% xtickformat(&#x27;usd&#x27;)</span></span><br><span class="line"><span class="comment">% legend(&#x27;All stars&#x27;, &#x27;Selected stars&#x27;)</span></span><br><span class="line">xtickformat(<span class="string">&#x27;degrees&#x27;</span>)</span><br><span class="line"><span class="comment">% ytickformat(&#x27;degrees&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.1</span> <span class="number">0.05</span> <span class="number">0.8</span> <span class="number">0.45</span>]);</span><br><span class="line">title(<span class="string">&#x27;模型校正后的方位角残差&#x27;</span>)</span><br><span class="line">box on; </span><br><span class="line">axis equal;</span><br><span class="line">xlim([<span class="number">0</span> <span class="number">360</span>]);</span><br><span class="line">ylim([<span class="number">-50</span> <span class="number">50</span>]);</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">60</span> <span class="number">120</span> <span class="number">180</span> <span class="number">240</span> <span class="number">300</span> <span class="number">360</span>])</span><br><span class="line">yticks([<span class="number">-50</span> <span class="number">-40</span> <span class="number">-30</span> <span class="number">-20</span> <span class="number">-10</span> <span class="number">0</span> <span class="number">10</span> <span class="number">20</span> <span class="number">30</span> <span class="number">40</span> <span class="number">50</span>])</span><br><span class="line">xlabel(<span class="string">&#x27;方位轴&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;残差（角秒）&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter</span>(data1(:,<span class="number">1</span>), EA, <span class="number">28</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% scatter(points(best_way,1), points(best_way,2), 20,&#x27;filled&#x27;,&#x27;MarkerFaceColor&#x27;,&#x27;#FF8000&#x27;)</span></span><br><span class="line"><span class="comment">% xtickformat(&#x27;usd&#x27;)</span></span><br><span class="line"><span class="comment">% legend(&#x27;All stars&#x27;, &#x27;Selected stars&#x27;)</span></span><br><span class="line">xtickformat(<span class="string">&#x27;degrees&#x27;</span>)</span><br><span class="line"><span class="comment">% ytickformat(&#x27;degrees&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% function  requation()</span></span><br><span class="line"></span><br><span class="line">clc;clear;</span><br><span class="line">load data1.csv</span><br><span class="line"></span><br><span class="line">azimuth=data1(:,<span class="number">1</span>)/<span class="number">180</span>*<span class="built_in">pi</span>; <span class="comment">%#ok&lt;*NODEF&gt;</span></span><br><span class="line">altitude=data1(:,<span class="number">2</span>)/<span class="number">180</span>*<span class="built_in">pi</span>;</span><br><span class="line">deltaA=<span class="number">0</span>-data1(:,<span class="number">3</span>)/<span class="number">3600.0</span>; <span class="comment">% °</span></span><br><span class="line">deltaH=<span class="number">0</span>-data1(:,<span class="number">4</span>)/<span class="number">3600.0</span>; </span><br><span class="line"></span><br><span class="line">X=[<span class="number">0.</span>*altitude+<span class="number">1</span> <span class="number">0.</span>*altitude -<span class="built_in">cos</span>(azimuth).*<span class="built_in">tan</span>(altitude) -<span class="built_in">sin</span>(azimuth).*<span class="built_in">tan</span>(altitude) <span class="built_in">sec</span>(altitude) -<span class="built_in">tan</span>(altitude) <span class="built_in">sin</span>(azimuth) <span class="built_in">cos</span>(azimuth) <span class="number">0.</span>*altitude <span class="built_in">sin</span>(<span class="number">2.</span>*azimuth) <span class="built_in">cos</span>(<span class="number">2.</span>*azimuth) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">sin</span>(<span class="number">2.</span>*azimuth).*<span class="built_in">sec</span>(altitude) <span class="built_in">cos</span>(<span class="number">2.</span>*azimuth).*<span class="built_in">sec</span>(altitude) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude];</span><br><span class="line">y=[<span class="number">0.</span>*altitude <span class="number">0.</span>*altitude+<span class="number">1</span> <span class="built_in">sin</span>(azimuth) -<span class="built_in">cos</span>(azimuth) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">cot</span>(altitude) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">sin</span>(azimuth) <span class="built_in">cos</span>(azimuth) altitude.*<span class="built_in">sin</span>(azimuth) altitude.*<span class="built_in">cos</span>(azimuth) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">sin</span>(<span class="number">2.</span>*azimuth) <span class="built_in">cos</span>(<span class="number">2.</span>*azimuth)];</span><br><span class="line"></span><br><span class="line">A=[X;y];</span><br><span class="line">Y=[deltaA;deltaH]; <span class="comment">% °</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%Res 为方程系数 Y° = A(弧度) * Res -&gt; </span></span><br><span class="line">Res = inv(A&#x27;*A)*A&#x27;*Y;</span><br><span class="line"><span class="comment">%E 为残差</span></span><br><span class="line">E = (A*Res - Y)*<span class="number">3600</span>;</span><br><span class="line">E = E / <span class="number">2.0</span>;</span><br><span class="line"><span class="comment">%MSE 为平均均方误差</span></span><br><span class="line">RMS = <span class="built_in">sqrt</span>(mse(E))</span><br><span class="line"><span class="comment">%输出 到TXT文件 科学计算法</span></span><br><span class="line"><span class="comment">%save ResultXISHU.txt Res -ascii; </span></span><br><span class="line">file1=fopen(<span class="string">&#x27;ResultXISHU.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="built_in">length</span>(Res)</span><br><span class="line">   fprintf(file1,<span class="string">&#x27;%5.5f\r\n&#x27;</span>,Res(<span class="built_in">i</span>));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">EA = E(<span class="number">1</span>:<span class="number">64</span>);</span><br><span class="line">EE = E(<span class="number">65</span>:<span class="keyword">end</span>);</span><br><span class="line"></span><br><span class="line">RMSA = <span class="built_in">sqrt</span>(mse(EA));</span><br><span class="line"></span><br><span class="line">RMSE = <span class="built_in">sqrt</span>(mse(EE));</span><br><span class="line"><span class="comment">% aa = </span></span><br><span class="line"></span><br><span class="line">fclose(file1);</span><br><span class="line"><span class="comment">%输出 到TXT文件 科学计算法</span></span><br><span class="line"><span class="comment">%save ResultRMS.txt RMS -ascii; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">% end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> :<span class="number">64</span></span><br><span class="line">    <span class="keyword">if</span> data1(<span class="built_in">i</span>,<span class="number">1</span>) &lt; <span class="number">0</span> </span><br><span class="line">        data1(<span class="built_in">i</span>,<span class="number">1</span>) = data1(<span class="built_in">i</span>,<span class="number">1</span>) + <span class="number">360</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.1</span> <span class="number">0.5</span> <span class="number">0.8</span> <span class="number">0.5</span>]);</span><br><span class="line">title(<span class="string">&#x27;模型校正前的方位角偏差&#x27;</span>,<span class="string">&#x27;FontWeight&#x27;</span>,<span class="string">&#x27;bold&#x27;</span>,<span class="string">&#x27;FontSize&#x27;</span>,<span class="number">12</span>)</span><br><span class="line">grid on;</span><br><span class="line">box on; </span><br><span class="line">axis equal;</span><br><span class="line">xlim([<span class="number">0</span> <span class="number">360</span>]);</span><br><span class="line">ylim([<span class="number">-80</span> <span class="number">50</span>]);</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">60</span> <span class="number">120</span> <span class="number">180</span> <span class="number">240</span> <span class="number">300</span> <span class="number">360</span>])</span><br><span class="line"><span class="comment">% yticks([0 30 60 90])</span></span><br><span class="line">xlabel(<span class="string">&#x27;方位轴&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;误差（角秒）&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter</span>(data1(:,<span class="number">1</span>), data1(:,<span class="number">3</span>), <span class="number">28</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% scatter(points(best_way,1), points(best_way,2), 20,&#x27;filled&#x27;,&#x27;MarkerFaceColor&#x27;,&#x27;#FF8000&#x27;)</span></span><br><span class="line"><span class="comment">% xtickformat(&#x27;usd&#x27;)</span></span><br><span class="line"><span class="comment">% legend(&#x27;All stars&#x27;, &#x27;Selected stars&#x27;)</span></span><br><span class="line">xtickformat(<span class="string">&#x27;degrees&#x27;</span>)</span><br><span class="line"><span class="comment">% ytickformat(&#x27;degrees&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.1</span> <span class="number">0.1</span> <span class="number">0.8</span> <span class="number">0.3</span>]);</span><br><span class="line">title(<span class="string">&#x27;模型校正后的方位角残差&#x27;</span>,<span class="string">&#x27;FontWeight&#x27;</span>,<span class="string">&#x27;bold&#x27;</span>,<span class="string">&#x27;FontSize&#x27;</span>,<span class="number">12</span>)</span><br><span class="line">box on; </span><br><span class="line"><span class="comment">% axis equal;</span></span><br><span class="line">xlim([<span class="number">0</span> <span class="number">360</span>]);</span><br><span class="line">ylim([<span class="number">-10</span> <span class="number">10</span>]);</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">60</span> <span class="number">120</span> <span class="number">180</span> <span class="number">240</span> <span class="number">300</span> <span class="number">360</span>])</span><br><span class="line">yticks([<span class="number">-50</span> <span class="number">-40</span> <span class="number">-30</span> <span class="number">-20</span> <span class="number">-10</span> <span class="number">0</span> <span class="number">10</span> <span class="number">20</span> <span class="number">30</span> <span class="number">40</span> <span class="number">50</span>])</span><br><span class="line">xlabel(<span class="string">&#x27;方位轴&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;残差（角秒）&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">2</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter</span>(data1(:,<span class="number">1</span>), EA, <span class="number">28</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% scatter(points(best_way,1), points(best_way,2), 20,&#x27;filled&#x27;,&#x27;MarkerFaceColor&#x27;,&#x27;#FF8000&#x27;)</span></span><br><span class="line"><span class="comment">% xtickformat(&#x27;usd&#x27;)</span></span><br><span class="line"><span class="comment">% legend(&#x27;All stars&#x27;, &#x27;Selected stars&#x27;)</span></span><br><span class="line">xtickformat(<span class="string">&#x27;degrees&#x27;</span>)</span><br><span class="line"><span class="comment">% ytickformat(&#x27;degrees&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% function  requation()</span></span><br><span class="line"></span><br><span class="line">clc;clear;</span><br><span class="line">load data1.csv</span><br><span class="line"></span><br><span class="line">azimuth=data1(:,<span class="number">1</span>)/<span class="number">180</span>*<span class="built_in">pi</span>; <span class="comment">%#ok&lt;*NODEF&gt;</span></span><br><span class="line">altitude=data1(:,<span class="number">2</span>)/<span class="number">180</span>*<span class="built_in">pi</span>;</span><br><span class="line">deltaA=<span class="number">0</span>-data1(:,<span class="number">3</span>)/<span class="number">3600.0</span>; <span class="comment">% °</span></span><br><span class="line">deltaH=<span class="number">0</span>-data1(:,<span class="number">4</span>)/<span class="number">3600.0</span>; </span><br><span class="line"></span><br><span class="line">X=[<span class="number">0.</span>*altitude+<span class="number">1</span> <span class="number">0.</span>*altitude -<span class="built_in">cos</span>(azimuth).*<span class="built_in">tan</span>(altitude) -<span class="built_in">sin</span>(azimuth).*<span class="built_in">tan</span>(altitude) <span class="built_in">sec</span>(altitude) -<span class="built_in">tan</span>(altitude) <span class="built_in">sin</span>(azimuth) <span class="built_in">cos</span>(azimuth) <span class="number">0.</span>*altitude <span class="built_in">sin</span>(<span class="number">2.</span>*azimuth) <span class="built_in">cos</span>(<span class="number">2.</span>*azimuth) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">sin</span>(<span class="number">2.</span>*azimuth).*<span class="built_in">sec</span>(altitude) <span class="built_in">cos</span>(<span class="number">2.</span>*azimuth).*<span class="built_in">sec</span>(altitude) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude];</span><br><span class="line">y=[<span class="number">0.</span>*altitude <span class="number">0.</span>*altitude+<span class="number">1</span> <span class="built_in">sin</span>(azimuth) -<span class="built_in">cos</span>(azimuth) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">cot</span>(altitude) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">sin</span>(azimuth) <span class="built_in">cos</span>(azimuth) altitude.*<span class="built_in">sin</span>(azimuth) altitude.*<span class="built_in">cos</span>(azimuth) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">sin</span>(<span class="number">2.</span>*azimuth) <span class="built_in">cos</span>(<span class="number">2.</span>*azimuth)];</span><br><span class="line"></span><br><span class="line">A=[X;y];</span><br><span class="line">Y=[deltaA;deltaH]; <span class="comment">% °</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%Res 为方程系数 Y° = A(弧度) * Res -&gt; </span></span><br><span class="line">Res = inv(A&#x27;*A)*A&#x27;*Y;</span><br><span class="line"><span class="comment">%E 为残差</span></span><br><span class="line">E = (A*Res - Y)*<span class="number">3600</span>;</span><br><span class="line"><span class="comment">%MSE 为平均均方误差</span></span><br><span class="line">RMS = <span class="built_in">sqrt</span>(mse(E))</span><br><span class="line"><span class="comment">%输出 到TXT文件 科学计算法</span></span><br><span class="line"><span class="comment">%save ResultXISHU.txt Res -ascii; </span></span><br><span class="line">file1=fopen(<span class="string">&#x27;ResultXISHU.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="built_in">length</span>(Res)</span><br><span class="line">   fprintf(file1,<span class="string">&#x27;%5.5f\r\n&#x27;</span>,Res(<span class="built_in">i</span>));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">EA = E(<span class="number">1</span>:<span class="number">64</span>);</span><br><span class="line">EE = E(<span class="number">65</span>:<span class="keyword">end</span>);</span><br><span class="line">RMSA = <span class="built_in">sqrt</span>(mse(EA));</span><br><span class="line"></span><br><span class="line">RMSE = <span class="built_in">sqrt</span>(mse(EE));</span><br><span class="line"><span class="comment">% aa = </span></span><br><span class="line"></span><br><span class="line">fclose(file1);</span><br><span class="line"><span class="comment">%输出 到TXT文件 科学计算法</span></span><br><span class="line"><span class="comment">%save ResultRMS.txt RMS -ascii; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">% end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">% for i = 1 :64</span></span><br><span class="line"><span class="comment">%     if data1(i,1) &lt; 0 </span></span><br><span class="line"><span class="comment">%         data1(i,1) = data1(i,1) + 360;</span></span><br><span class="line"><span class="comment">%     end</span></span><br><span class="line"><span class="comment">% end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.1</span> <span class="number">0.55</span> <span class="number">0.8</span> <span class="number">0.4</span>]);</span><br><span class="line">title(<span class="string">&#x27;模型校正前的高度角偏差&#x27;</span>)</span><br><span class="line">grid on;</span><br><span class="line">box on; </span><br><span class="line"><span class="comment">% axis equal;</span></span><br><span class="line">xlim([<span class="number">0</span> <span class="number">90</span>]);</span><br><span class="line">ylim([<span class="number">0</span> <span class="number">300</span>]);</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">15</span> <span class="number">30</span> <span class="number">45</span> <span class="number">60</span> <span class="number">75</span> <span class="number">90</span>]);</span><br><span class="line"><span class="comment">% yticks([0 30 60 90])</span></span><br><span class="line">xlabel(<span class="string">&#x27;高度角&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;误差（角秒）&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">5</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">5</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter</span>(data1(:,<span class="number">2</span>), data1(:,<span class="number">4</span>), <span class="number">28</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% scatter(points(best_way,1), points(best_way,2), 20,&#x27;filled&#x27;,&#x27;MarkerFaceColor&#x27;,&#x27;#FF8000&#x27;)</span></span><br><span class="line"><span class="comment">% xtickformat(&#x27;usd&#x27;)</span></span><br><span class="line"><span class="comment">% legend(&#x27;All stars&#x27;, &#x27;Selected stars&#x27;)</span></span><br><span class="line">xtickformat(<span class="string">&#x27;degrees&#x27;</span>)</span><br><span class="line"><span class="comment">% ytickformat(&#x27;degrees&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.1</span> <span class="number">0.1</span> <span class="number">0.8</span> <span class="number">0.35</span>]);</span><br><span class="line">title(<span class="string">&#x27;模型校正后的高度角残差&#x27;</span>)</span><br><span class="line">box on; </span><br><span class="line"><span class="comment">% axis equal;</span></span><br><span class="line">xlim([<span class="number">0</span> <span class="number">90</span>]);</span><br><span class="line">ylim([<span class="number">-20</span> <span class="number">20</span>]);</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">15</span> <span class="number">30</span> <span class="number">45</span> <span class="number">60</span> <span class="number">75</span> <span class="number">90</span>]);</span><br><span class="line"><span class="comment">% yticks([0 30 60 90])</span></span><br><span class="line">xlabel(<span class="string">&#x27;高度角&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;残差（角秒）&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">5</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">5</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter</span>(data1(:,<span class="number">2</span>), EE, <span class="number">28</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% scatter(points(best_way,1), points(best_way,2), 20,&#x27;filled&#x27;,&#x27;MarkerFaceColor&#x27;,&#x27;#FF8000&#x27;)</span></span><br><span class="line"><span class="comment">% xtickformat(&#x27;usd&#x27;)</span></span><br><span class="line"><span class="comment">% legend(&#x27;All stars&#x27;, &#x27;Selected stars&#x27;)</span></span><br><span class="line">xtickformat(<span class="string">&#x27;degrees&#x27;</span>)</span><br><span class="line"><span class="comment">% ytickformat(&#x27;degrees&#x27;)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% function  requation()</span></span><br><span class="line"></span><br><span class="line">clc;clear;</span><br><span class="line">load data2.csv</span><br><span class="line"></span><br><span class="line">azimuth=data2(:,<span class="number">1</span>)/<span class="number">180</span>*<span class="built_in">pi</span>; <span class="comment">%#ok&lt;*NODEF&gt;</span></span><br><span class="line">altitude=data2(:,<span class="number">2</span>)/<span class="number">180</span>*<span class="built_in">pi</span>;</span><br><span class="line">deltaA=<span class="number">0</span>-data2(:,<span class="number">3</span>)/<span class="number">3600.0</span>; <span class="comment">% °</span></span><br><span class="line">deltaH=<span class="number">0</span>-data2(:,<span class="number">5</span>)/<span class="number">3600.0</span>; </span><br><span class="line"></span><br><span class="line">X=[<span class="number">0.</span>*altitude+<span class="number">1</span> <span class="number">0.</span>*altitude -<span class="built_in">cos</span>(azimuth).*<span class="built_in">tan</span>(altitude) -<span class="built_in">sin</span>(azimuth).*<span class="built_in">tan</span>(altitude) <span class="built_in">sec</span>(altitude) -<span class="built_in">tan</span>(altitude) <span class="built_in">sin</span>(azimuth) <span class="built_in">cos</span>(azimuth) <span class="number">0.</span>*altitude <span class="built_in">sin</span>(<span class="number">2.</span>*azimuth) <span class="built_in">cos</span>(<span class="number">2.</span>*azimuth) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">sin</span>(<span class="number">2.</span>*azimuth).*<span class="built_in">sec</span>(altitude) <span class="built_in">cos</span>(<span class="number">2.</span>*azimuth).*<span class="built_in">sec</span>(altitude) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude];</span><br><span class="line">y=[<span class="number">0.</span>*altitude <span class="number">0.</span>*altitude+<span class="number">1</span> <span class="built_in">sin</span>(azimuth) -<span class="built_in">cos</span>(azimuth) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">cot</span>(altitude) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">sin</span>(azimuth) <span class="built_in">cos</span>(azimuth) altitude.*<span class="built_in">sin</span>(azimuth) altitude.*<span class="built_in">cos</span>(azimuth) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">sin</span>(<span class="number">2.</span>*azimuth) <span class="built_in">cos</span>(<span class="number">2.</span>*azimuth)];</span><br><span class="line"></span><br><span class="line">A=[X;y];</span><br><span class="line">Y=[deltaA;deltaH]; <span class="comment">% °</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%Res 为方程系数 Y° = A(弧度) * Res -&gt; </span></span><br><span class="line">Res = inv(A&#x27;*A)*A&#x27;*Y;</span><br><span class="line"><span class="comment">%E 为残差</span></span><br><span class="line">E = (A*Res - Y)*<span class="number">3600</span>;</span><br><span class="line">E = E/<span class="number">2.0</span>;</span><br><span class="line"><span class="comment">%MSE 为平均均方误差</span></span><br><span class="line">RMS = <span class="built_in">sqrt</span>(mse(E))</span><br><span class="line"><span class="comment">%输出 到TXT文件 科学计算法</span></span><br><span class="line"><span class="comment">%save ResultXISHU.txt Res -ascii; </span></span><br><span class="line">file1=fopen(<span class="string">&#x27;ResultXISHU.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="built_in">length</span>(Res)</span><br><span class="line">   fprintf(file1,<span class="string">&#x27;%5.5f\r\n&#x27;</span>,Res(<span class="built_in">i</span>));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">EA = E(<span class="number">1</span>:<span class="number">64</span>);</span><br><span class="line">EE = E(<span class="number">65</span>:<span class="keyword">end</span>);</span><br><span class="line">RMSA = <span class="built_in">sqrt</span>(mse(EA));</span><br><span class="line"></span><br><span class="line">RMSE = <span class="built_in">sqrt</span>(mse(EE));</span><br><span class="line"><span class="comment">% aa = </span></span><br><span class="line"></span><br><span class="line">fclose(file1);</span><br><span class="line"><span class="comment">%输出 到TXT文件 科学计算法</span></span><br><span class="line"><span class="comment">%save ResultRMS.txt RMS -ascii; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">% end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">% for i = 1 :64</span></span><br><span class="line"><span class="comment">%     if data2(i,1) &lt; 0 </span></span><br><span class="line"><span class="comment">%         data2(i,1) = data2(i,1) + 360;</span></span><br><span class="line"><span class="comment">%     end</span></span><br><span class="line"><span class="comment">% end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.1</span> <span class="number">0.55</span> <span class="number">0.8</span> <span class="number">0.4</span>]);</span><br><span class="line">title(<span class="string">&#x27;模型校正前的高度角偏差&#x27;</span>,<span class="string">&#x27;FontWeight&#x27;</span>,<span class="string">&#x27;bold&#x27;</span>,<span class="string">&#x27;FontSize&#x27;</span>,<span class="number">12</span>)</span><br><span class="line">grid on;</span><br><span class="line">box on; </span><br><span class="line"><span class="comment">% axis equal;</span></span><br><span class="line">xlim([<span class="number">0</span> <span class="number">90</span>]);</span><br><span class="line">ylim([<span class="number">-100</span> <span class="number">200</span>]);</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">15</span> <span class="number">30</span> <span class="number">45</span> <span class="number">60</span> <span class="number">75</span> <span class="number">90</span>]);</span><br><span class="line"><span class="comment">% yticks([0 30 60 90])</span></span><br><span class="line">xlabel(<span class="string">&#x27;高度角&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;误差（角秒）&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">5</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter</span>(data2(:,<span class="number">2</span>), data2(:,<span class="number">5</span>), <span class="number">28</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% scatter(points(best_way,1), points(best_way,2), 20,&#x27;filled&#x27;,&#x27;MarkerFaceColor&#x27;,&#x27;#FF8000&#x27;)</span></span><br><span class="line"><span class="comment">% xtickformat(&#x27;usd&#x27;)</span></span><br><span class="line"><span class="comment">% legend(&#x27;All stars&#x27;, &#x27;Selected stars&#x27;)</span></span><br><span class="line">xtickformat(<span class="string">&#x27;degrees&#x27;</span>)</span><br><span class="line"><span class="comment">% ytickformat(&#x27;degrees&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.1</span> <span class="number">0.1</span> <span class="number">0.8</span> <span class="number">0.33</span>]);</span><br><span class="line">title(<span class="string">&#x27;模型校正后的高度角残差&#x27;</span>,<span class="string">&#x27;FontWeight&#x27;</span>,<span class="string">&#x27;bold&#x27;</span>,<span class="string">&#x27;FontSize&#x27;</span>,<span class="number">12</span>)</span><br><span class="line">box on; </span><br><span class="line"><span class="comment">% axis equal;</span></span><br><span class="line">xlim([<span class="number">0</span> <span class="number">90</span>]);</span><br><span class="line">ylim([<span class="number">-10</span> <span class="number">10</span>]);</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">15</span> <span class="number">30</span> <span class="number">45</span> <span class="number">60</span> <span class="number">75</span> <span class="number">90</span>]);</span><br><span class="line"><span class="comment">% yticks([0 30 60 90])</span></span><br><span class="line">xlabel(<span class="string">&#x27;高度角&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;残差（角秒）&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">5</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">5</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter</span>(data2(:,<span class="number">2</span>), EE, <span class="number">28</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% scatter(points(best_way,1), points(best_way,2), 20,&#x27;filled&#x27;,&#x27;MarkerFaceColor&#x27;,&#x27;#FF8000&#x27;)</span></span><br><span class="line"><span class="comment">% xtickformat(&#x27;usd&#x27;)</span></span><br><span class="line"><span class="comment">% legend(&#x27;All stars&#x27;, &#x27;Selected stars&#x27;)</span></span><br><span class="line">xtickformat(<span class="string">&#x27;degrees&#x27;</span>)</span><br><span class="line"><span class="comment">% ytickformat(&#x27;degrees&#x27;)</span></span><br></pre></td></tr></table></figure>
<p><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230323111042404.png" alt="image-20230323111042404"></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% function  requation()</span></span><br><span class="line"></span><br><span class="line">clc;clear;</span><br><span class="line">load data2.csv</span><br><span class="line"></span><br><span class="line">azimuth=data2(:,<span class="number">1</span>)/<span class="number">180</span>*<span class="built_in">pi</span>; <span class="comment">%#ok&lt;*NODEF&gt;</span></span><br><span class="line">altitude=data2(:,<span class="number">2</span>)/<span class="number">180</span>*<span class="built_in">pi</span>;</span><br><span class="line">deltaA=<span class="number">0</span>-data2(:,<span class="number">3</span>)/<span class="number">3600.0</span>; <span class="comment">% °</span></span><br><span class="line">deltaH=<span class="number">0</span>-data2(:,<span class="number">5</span>)/<span class="number">3600.0</span>; </span><br><span class="line"></span><br><span class="line">X=[<span class="number">0.</span>*altitude+<span class="number">1</span> <span class="number">0.</span>*altitude -<span class="built_in">cos</span>(azimuth).*<span class="built_in">tan</span>(altitude) -<span class="built_in">sin</span>(azimuth).*<span class="built_in">tan</span>(altitude) <span class="built_in">sec</span>(altitude) -<span class="built_in">tan</span>(altitude) <span class="built_in">sin</span>(azimuth) <span class="built_in">cos</span>(azimuth) <span class="number">0.</span>*altitude <span class="built_in">sin</span>(<span class="number">2.</span>*azimuth) <span class="built_in">cos</span>(<span class="number">2.</span>*azimuth) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">sin</span>(<span class="number">2.</span>*azimuth).*<span class="built_in">sec</span>(altitude) <span class="built_in">cos</span>(<span class="number">2.</span>*azimuth).*<span class="built_in">sec</span>(altitude) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude];</span><br><span class="line">y=[<span class="number">0.</span>*altitude <span class="number">0.</span>*altitude+<span class="number">1</span> <span class="built_in">sin</span>(azimuth) -<span class="built_in">cos</span>(azimuth) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">cot</span>(altitude) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">sin</span>(azimuth) <span class="built_in">cos</span>(azimuth) altitude.*<span class="built_in">sin</span>(azimuth) altitude.*<span class="built_in">cos</span>(azimuth) <span class="number">0.</span>*altitude <span class="number">0.</span>*altitude <span class="built_in">sin</span>(<span class="number">2.</span>*azimuth) <span class="built_in">cos</span>(<span class="number">2.</span>*azimuth)];</span><br><span class="line"></span><br><span class="line">A=[X;y];</span><br><span class="line">Y=[deltaA;deltaH]; <span class="comment">% °</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%Res 为方程系数 Y° = A(弧度) * Res -&gt; </span></span><br><span class="line">Res = inv(A&#x27;*A)*A&#x27;*Y;</span><br><span class="line"><span class="comment">%E 为残差</span></span><br><span class="line">E = (A*Res - Y)*<span class="number">3600</span>;</span><br><span class="line"><span class="comment">%MSE 为平均均方误差</span></span><br><span class="line">RMS = <span class="built_in">sqrt</span>(mse(E))</span><br><span class="line"><span class="comment">%输出 到TXT文件 科学计算法</span></span><br><span class="line"><span class="comment">%save ResultXISHU.txt Res -ascii; </span></span><br><span class="line">file1=fopen(<span class="string">&#x27;ResultXISHU.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="built_in">length</span>(Res)</span><br><span class="line">   fprintf(file1,<span class="string">&#x27;%5.5f\r\n&#x27;</span>,Res(<span class="built_in">i</span>));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">EA = E(<span class="number">1</span>:<span class="number">64</span>);</span><br><span class="line">EE = E(<span class="number">65</span>:<span class="keyword">end</span>);</span><br><span class="line">RMSA = <span class="built_in">sqrt</span>(mse(EA));</span><br><span class="line"></span><br><span class="line">RMSE = <span class="built_in">sqrt</span>(mse(EE));</span><br><span class="line"><span class="comment">% aa = </span></span><br><span class="line"></span><br><span class="line">fclose(file1);</span><br><span class="line"><span class="comment">%输出 到TXT文件 科学计算法</span></span><br><span class="line"><span class="comment">%save ResultRMS.txt RMS -ascii; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">% end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> :<span class="number">64</span></span><br><span class="line">    <span class="keyword">if</span> data2(<span class="built_in">i</span>,<span class="number">1</span>) &lt; <span class="number">0</span> </span><br><span class="line">        data2(<span class="built_in">i</span>,<span class="number">1</span>) = data2(<span class="built_in">i</span>,<span class="number">1</span>) + <span class="number">360</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.1</span> <span class="number">0.55</span> <span class="number">0.8</span> <span class="number">0.4</span>]);</span><br><span class="line">title(<span class="string">&#x27;指向校正前高度角误差分布图&#x27;</span>,FontWeight=<span class="string">&#x27;bold&#x27;</span>)</span><br><span class="line">grid on;</span><br><span class="line">box on; </span><br><span class="line"><span class="comment">% axis equal;</span></span><br><span class="line">xlim([<span class="number">-80</span> <span class="number">80</span>]);</span><br><span class="line">ylim([<span class="number">-100</span> <span class="number">200</span>]);</span><br><span class="line">xticks([<span class="number">-80</span> <span class="number">-60</span> <span class="number">-40</span> <span class="number">-20</span>  <span class="number">0</span>  <span class="number">20</span>  <span class="number">40</span> <span class="number">60</span> <span class="number">80</span>])</span><br><span class="line"><span class="comment">% yticks([0 30 60 90])</span></span><br><span class="line">xlabel(<span class="string">&#x27;校正前方位角偏差（角秒）&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;校正前高度角偏差（角秒）&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line">r = pdist([[<span class="number">0</span>,<span class="number">0</span>];[<span class="number">50</span>,<span class="number">0</span>]],<span class="string">&#x27;euclidean&#x27;</span>);</span><br><span class="line">p1 = rectangle(<span class="string">&#x27;position&#x27;</span>,[<span class="number">0</span>-r,<span class="number">0</span>-r,<span class="number">2</span>*r,<span class="number">2</span>*r],<span class="string">&#x27;curvature&#x27;</span>,[<span class="number">1</span>,<span class="number">1</span>],<span class="string">&#x27;LineStyle&#x27;</span>,<span class="string">&#x27;--&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">r = pdist([[<span class="number">0</span>,<span class="number">0</span>];[<span class="number">150</span>,<span class="number">0</span>]],<span class="string">&#x27;euclidean&#x27;</span>);</span><br><span class="line">p2 = rectangle(<span class="string">&#x27;position&#x27;</span>,[<span class="number">0</span>-r,<span class="number">0</span>-r,<span class="number">2</span>*r,<span class="number">2</span>*r],<span class="string">&#x27;curvature&#x27;</span>,[<span class="number">1</span>,<span class="number">1</span>],<span class="string">&#x27;LineStyle&#x27;</span>,<span class="string">&#x27;-.&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter</span>(data2(:,<span class="number">3</span>), data2(:,<span class="number">5</span>), <span class="number">28</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% scatter(points(best_way,1), points(best_way,2), 20,&#x27;filled&#x27;,&#x27;MarkerFaceColor&#x27;,&#x27;#FF8000&#x27;)</span></span><br><span class="line"><span class="comment">% xtickformat(&#x27;usd&#x27;)</span></span><br><span class="line"><span class="comment">% legend(&#x27;All stars&#x27;, &#x27;Selected stars&#x27;)</span></span><br><span class="line"><span class="comment">% xtickformat(&#x27;degrees&#x27;)</span></span><br><span class="line"><span class="comment">% ytickformat(&#x27;degrees&#x27;)</span></span><br><span class="line">a = <span class="built_in">plot</span>([[<span class="number">1000</span>,<span class="number">2000</span>],[<span class="number">1000</span>,<span class="number">2000</span>]],<span class="string">&#x27;--k&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">b = <span class="built_in">plot</span>([[<span class="number">1000</span>,<span class="number">2000</span>],[<span class="number">1000</span>,<span class="number">2000</span>]],<span class="string">&#x27;-.k&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">legend</span>([a, b],&#123;<span class="string">&#x27;50 arcsec&#x27;</span>,<span class="string">&#x27;150 arcsec&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0.1</span> <span class="number">0.1</span> <span class="number">0.8</span> <span class="number">0.35</span>]);</span><br><span class="line">title(<span class="string">&#x27;指向校正后高度角残差分布图&#x27;</span>,FontWeight=<span class="string">&#x27;bold&#x27;</span>)</span><br><span class="line">box on; </span><br><span class="line"><span class="comment">% axis equal;</span></span><br><span class="line">xlim([<span class="number">-60</span> <span class="number">60</span>]);</span><br><span class="line">ylim([<span class="number">-20</span> <span class="number">20</span>]);</span><br><span class="line">xticks([<span class="number">-80</span> <span class="number">-60</span> <span class="number">-40</span> <span class="number">-20</span>  <span class="number">0</span>  <span class="number">20</span>  <span class="number">40</span> <span class="number">60</span> <span class="number">80</span>])</span><br><span class="line"><span class="comment">% yticks([0 30 60 90])</span></span><br><span class="line">xlabel(<span class="string">&#x27;校正后方位角残差（角秒）&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;校正后高度角残差（角秒）&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"></span><br><span class="line">r = pdist([[<span class="number">0</span>,<span class="number">0</span>];[<span class="number">10</span>,<span class="number">0</span>]],<span class="string">&#x27;euclidean&#x27;</span>);</span><br><span class="line">p1 = rectangle(<span class="string">&#x27;position&#x27;</span>,[<span class="number">0</span>-r,<span class="number">0</span>-r,<span class="number">2</span>*r,<span class="number">2</span>*r],<span class="string">&#x27;curvature&#x27;</span>,[<span class="number">1</span>,<span class="number">1</span>],<span class="string">&#x27;LineStyle&#x27;</span>,<span class="string">&#x27;--&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">r = pdist([[<span class="number">0</span>,<span class="number">0</span>];[<span class="number">15</span>,<span class="number">0</span>]],<span class="string">&#x27;euclidean&#x27;</span>);</span><br><span class="line">p2 = rectangle(<span class="string">&#x27;position&#x27;</span>,[<span class="number">0</span>-r,<span class="number">0</span>-r,<span class="number">2</span>*r,<span class="number">2</span>*r],<span class="string">&#x27;curvature&#x27;</span>,[<span class="number">1</span>,<span class="number">1</span>],<span class="string">&#x27;LineStyle&#x27;</span>,<span class="string">&#x27;-.&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter</span>(EA, EE, <span class="number">28</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">% scatter(points(best_way,1), points(best_way,2), 20,&#x27;filled&#x27;,&#x27;MarkerFaceColor&#x27;,&#x27;#FF8000&#x27;)</span></span><br><span class="line"><span class="comment">% xtickformat(&#x27;usd&#x27;)</span></span><br><span class="line"><span class="comment">% legend(&#x27;All stars&#x27;, &#x27;Selected stars&#x27;)</span></span><br><span class="line"><span class="comment">% xtickformat(&#x27;degrees&#x27;)</span></span><br><span class="line"><span class="comment">% ytickformat(&#x27;degrees&#x27;)</span></span><br><span class="line"><span class="built_in">hold</span> on; </span><br><span class="line">a = <span class="built_in">plot</span>([[<span class="number">100</span>,<span class="number">200</span>],[<span class="number">100</span>,<span class="number">200</span>]],<span class="string">&#x27;--k&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">b = <span class="built_in">plot</span>([[<span class="number">100</span>,<span class="number">200</span>],[<span class="number">100</span>,<span class="number">200</span>]],<span class="string">&#x27;-.k&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">legend</span>([a, b],&#123;<span class="string">&#x27;10 arcsec&#x27;</span>,<span class="string">&#x27;15 arcsec&#x27;</span>&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">clear; </span><br><span class="line"><span class="comment">% M = csvread(&#x27;J2000_5hor.csv&#x27;);</span></span><br><span class="line">MM = csvread(<span class="string">&#x27;J2000_5horzhengfangxing.csv&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">% MM = sortrows(M,4);</span></span><br><span class="line"><span class="comment">% MMM = MM(22:85,:);</span></span><br><span class="line"></span><br><span class="line">clf;</span><br><span class="line"><span class="comment">% box on;</span></span><br><span class="line">axis equal;</span><br><span class="line">xticks([<span class="number">0</span> <span class="number">60</span> <span class="number">120</span> <span class="number">180</span> <span class="number">240</span> <span class="number">300</span> <span class="number">360</span>])</span><br><span class="line">yticks([<span class="number">0</span> <span class="number">30</span> <span class="number">60</span> <span class="number">90</span>])</span><br><span class="line">xlim([<span class="number">-10</span> <span class="number">370</span>]);</span><br><span class="line">ylim([<span class="number">-10</span> <span class="number">100</span>]);</span><br><span class="line"><span class="comment">% grid on;</span></span><br><span class="line">ax = gca;</span><br><span class="line">ax.XAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.XAxis.MinorTickValues = ax.XAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.XAxis.Limits(<span class="number">2</span>);</span><br><span class="line">ax.YAxis.MinorTick = <span class="string">&#x27;on&#x27;</span>;</span><br><span class="line">ax.YAxis.MinorTickValues = ax.YAxis.Limits(<span class="number">1</span>):<span class="number">10</span>:ax.YAxis.Limits(<span class="number">2</span>);</span><br><span class="line">grid minor;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line">xt=get(gca,<span class="string">&#x27;xtick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(xt);</span><br><span class="line">	xt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,xt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;xticklabel&#x27;</span>,xt1);</span><br><span class="line">yt=get(gca,<span class="string">&#x27;ytick&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">numel</span>(yt);</span><br><span class="line">	yt1&#123;k&#125;=sprintf(<span class="string">&#x27;%d°&#x27;</span>,yt(k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">set(gca,<span class="string">&#x27;yticklabel&#x27;</span>,yt1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">xlabel(<span class="string">&#x27;方位轴&#x27;</span>,<span class="string">&#x27;FontWeight&#x27;</span>,<span class="string">&#x27;bold&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;高度轴&#x27;</span>,<span class="string">&#x27;FontWeight&#x27;</span>,<span class="string">&#x27;bold&#x27;</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">90</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1.5</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1.5</span>);</span><br><span class="line">line([<span class="number">0</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">0</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1.5</span>);</span><br><span class="line">line([<span class="number">360</span>,<span class="number">360</span>],[<span class="number">0</span>,<span class="number">90</span>],<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;linewidth&#x27;</span>,<span class="number">1.5</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter</span>(MM(:,<span class="number">2</span>), MM(:,<span class="number">3</span>))</span><br><span class="line">Copy_3_of_totalH(MM(:,<span class="number">2</span>:<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">tsuiwade</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://tsuiwade.github.io/2023/04/24/blog71-studyover/">https://tsuiwade.github.io/2023/04/24/blog71-studyover/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://tsuiwade.github.io" target="_blank">TsuiWade's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%A7%91%E7%A0%94/">科研</a></div><div class="post_share"><div class="social-share" data-image="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230424195853639.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><link rel="stylesheet" href="/css/coin.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">不给糖就捣蛋</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></button></div><script defer="defer" src="/js/coin.js"></script><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2023/01/06/blog70-study5/"><img class="next-cover" src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230106151805242.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">冲毕业第六七八周记录</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/11/22/blog66-study1/" title="冲毕业第一周记录"><img class="cover" src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20221122152053959.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-22</div><div class="title">冲毕业第一周记录</div></div></a></div><div><a href="/2022/12/19/blog69-study4/" title="冲毕业第五周记录"><img class="cover" src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20221212201741568.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-19</div><div class="title">冲毕业第五周记录</div></div></a></div><div><a href="/2023/01/06/blog70-study5/" title="冲毕业第六七八周记录"><img class="cover" src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230106151805242.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-06</div><div class="title">冲毕业第六七八周记录</div></div></a></div><div><a href="/2022/12/06/blog67-study2/" title="冲毕业第二、三周记录"><img class="cover" src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20221126191150684.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-06</div><div class="title">冲毕业第二、三周记录</div></div></a></div><div><a href="/2022/12/10/blog68-study3/" title="冲毕业第四周记录"><img class="cover" src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20221210165212635.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-10</div><div class="title">冲毕业第四周记录</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/1a27de723e1cb04e5acd82cbf4146166_31ebbe760ba45b872b1b8f6c19eb6246.gif" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">tsuiwade</div><div class="author-info__description">记录技术生活的点点滴滴</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">70</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">41</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">23</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/tsuiwade"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/tsuiwade" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:478451541@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/381957255" target="_blank" title="bilibili"><i class="iconfont  icon-bilibili"></i></a><a class="social-icon" href="/img/alipay.jpg" target="_blank" title="alipay"><i class="fab  fa-alipay"></i></a><a class="social-icon" href="/img/wechat.jpg" target="_blank" title="wechat"><i class="fab  fa-weixin"></i></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=478451541" target="_blank" title="qq"><i class="fab  fa-qq"></i></a><a class="social-icon" href="https://blog.csdn.net/" target="_blank" title="CSDN"><i class="iconfont  icon-csdn3"></i></a><a class="social-icon" href="https://music.163.com/#/user/home?id=321642197" target="_blank" title="wangyiyun"><i class="iconfont  icon-wangyiyunyinyuemusic1193417easyiconnet"></i></a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/04/24/blog71-studyover/" title="冲毕业结束"><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230424195853639.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="冲毕业结束"/></a><div class="content"><a class="title" href="/2023/04/24/blog71-studyover/" title="冲毕业结束">冲毕业结束</a><time datetime="2023-04-24T20:08:32.000Z" title="发表于 2023-04-24 20:08:32">2023-04-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/06/blog70-study5/" title="冲毕业第六七八周记录"><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230106151805242.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="冲毕业第六七八周记录"/></a><div class="content"><a class="title" href="/2023/01/06/blog70-study5/" title="冲毕业第六七八周记录">冲毕业第六七八周记录</a><time datetime="2023-01-06T21:16:25.000Z" title="发表于 2023-01-06 21:16:25">2023-01-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/19/blog69-study4/" title="冲毕业第五周记录"><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20221212201741568.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="冲毕业第五周记录"/></a><div class="content"><a class="title" href="/2022/12/19/blog69-study4/" title="冲毕业第五周记录">冲毕业第五周记录</a><time datetime="2022-12-19T16:29:26.000Z" title="发表于 2022-12-19 16:29:26">2022-12-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/10/blog68-study3/" title="冲毕业第四周记录"><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20221210165212635.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="冲毕业第四周记录"/></a><div class="content"><a class="title" href="/2022/12/10/blog68-study3/" title="冲毕业第四周记录">冲毕业第四周记录</a><time datetime="2022-12-10T16:57:34.000Z" title="发表于 2022-12-10 16:57:34">2022-12-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/06/blog67-study2/" title="冲毕业第二、三周记录"><img src="https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20221126191150684.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="冲毕业第二、三周记录"/></a><div class="content"><a class="title" href="/2022/12/06/blog67-study2/" title="冲毕业第二、三周记录">冲毕业第二、三周记录</a><time datetime="2022-12-06T16:30:34.000Z" title="发表于 2022-12-06 16:30:34">2022-12-06</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://images-1312692717.cos.ap-nanjing.myqcloud.com/img/image-20230424195853639.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By tsuiwade</div><div class="footer_custom_text"><p><a style="margin-inline:5px"target="_blank" href="https://hexo.io/"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为 Hexo" alt="HEXO"></a><a style="margin-inline:5px"target="_blank" href="https://butterfly.js.org/"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用 Butterfly" alt="Butterfly"></a><a style="margin-inline:5px"target="_blank" href="https://www.jsdelivr.com/"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="本站使用 Jsdelivr 为静态资源提供CDN加速" alt="Jsdelivr"></a><a style="margin-inline:5px"target="_blank" href="https://github.com/"><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由 GitHub 托管" alt="GitHub"></a><a style="margin-inline:5px"target="_blank"href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" alt="img" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div></div><div id="workboard"><script async="async" src="/js/runtime.js"></script></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: 'mjS6lvGtY7MvAlxolqz8OdMn-gzGzoHsz',
      appKey: 'QakpY3QuhiOscnuh50tI450M',
      placeholder: '留下你的足迹吧~~',
      avatar: 'monsterid',
      meta: 'nick'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('nick'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign(initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/js/hideMobileSidebar.js"></script><script defer src="https://cdn.jsdelivr.net/gh/graingert/wow@1.3.0/dist/wow.min.js"></script><script data-pjax src="/js/myjs.js"></script><script data-pjax src="/js/githubcalendar.js"></script><script data-pjax src="/js/giteecalendar.js"></script><script defer data-pjax src="/js/wow_init.js"></script><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/js/mouse_snow.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/hexo-theme-volantis@latest/source/js/issues.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>function history_calendar_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>那年今日</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>';
                console.log('已挂载history_calendar')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='all'|| 'all' ==='all')){

            history_calendar_injector_config()
        } </script><script data-pjax  src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script data-pjax>function electric_clock_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img id="card-clock-loading" src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-clock/clock/images/weather/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading" class="entered loading"></div></div></div></div></div>';
                console.log('已挂载electric_clock')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='all'|| 'all' ==='all')){

            electric_clock_injector_config()
        } </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax  src="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.js"></script>
  <script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.21/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://python-github-calendar-api.vercel.app/api?tsuiwade";
            var git_color =['#ebedf0', '#fdcdec', '#fc9bd9', '#fa6ac5', '#f838b2', '#f5089f', '#c4067e', '#92055e', '#540336', '#48022f', '#30021f'];
            var git_user ="tsuiwade";
            var parent_div_git = document.getElementById('recent-posts');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/'){
                console.log('已挂载github calendar')
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('recent-posts')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style></style><!-- hexo injector body_end end --></body></html>